<!DOCTYPE html>
<html lang="zh-hans">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta itemprop="name" content="Laravelçš„APIåˆå§‹æ­å»ºä¹‹PassportğŸ˜„">
<meta itemprop="description" content="ä»‹ç» åœ¨ Laravelä¸­ï¼Œå®ç°åŸºäºä¼ ç»Ÿè¡¨å•çš„ç™»é™†å’Œæˆæƒå·²ç»éå¸¸ç®€å•ï¼Œä½†æ˜¯å¦‚ä½•æ»¡è¶³ API åœºæ™¯ä¸‹çš„æˆæƒéœ€æ±‚å‘¢ï¼Ÿåœ¨ APIåœºæ™¯é‡Œé€šå¸¸é€šè¿‡ä»¤ç‰Œæ¥å®ç°ç”¨æˆ·æˆæƒï¼Œè€Œéç»´æŠ¤è¯·æ±‚ä¹‹é—´çš„ Session çŠ¶æ€ã€‚åœ¨ Laravel é¡¹ç›®ä¸­ä½¿ç”¨ Passport å¯ä»¥è½»è€Œæ˜“ä¸¾åœ°å®ç° API æˆæƒè®¤è¯ï¼ŒPassport å¯ä»¥åœ¨å‡ åˆ†é’Ÿä¹‹å†…ä¸ºä½ çš„åº”ç”¨ç¨‹åºæä¾›å®Œæ•´çš„ OAuth2 æœåŠ¡ç«¯å®ç°ã€‚Passport æ˜¯åŸºäºç”± Alex Bilbie ç»´æŠ¤çš„ League OAuth2 server å»ºç«‹çš„ã€‚â¤ğŸ·ğŸ˜˜
å®‰è£… 1ã€å®‰è£…ä¸€ä¸ªå…¨æ–° laravel é¡¹ç›®
composer create-project --prefer-dist laravel/laravel passport 2ã€å®‰è£… Laravel Passport åŒ…
 Laravel Passport å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…ä¸ºä½ çš„åº”ç”¨å®ç°ä¸€ä¸ªå®Œæ•´çš„ OAuth2æœåŠ¡å™¨  composer require laravel/passport 3ã€åˆ›å»ºå­˜å‚¨å®¢æˆ·ç«¯å’Œä»¤ç‰Œçš„æ•°æ®è¡¨
 Passport æœåŠ¡æä¾›å™¨ä½¿ç”¨æ¡†æ¶æ³¨å†Œè‡ªå·±çš„æ•°æ®åº“è¿ç§»ç›®å½•ï¼Œå› æ­¤åœ¨æ³¨å†Œæä¾›å™¨åï¼Œå°±åº”è¯¥è¿è¡Œ Passport çš„è¿ç§»å‘½ä»¤æ¥è‡ªåŠ¨åˆ›å»ºå­˜å‚¨å®¢æˆ·ç«¯å’Œä»¤ç‰Œçš„æ•°æ®è¡¨  php artisan migrate  å¦‚æœä½ ä¸æ‰“ç®—ä½¿ç”¨ Passport çš„é»˜è®¤è¿ç§»ï¼Œä½ åº”è¯¥åœ¨ AppServiceProvider çš„ register æ–¹æ³•ä¸­è°ƒç”¨ Passport::ignoreMigrations æ–¹æ³•ã€‚ ä½ å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤ php artisan vendor:publish --tag=passport-migrations å¯¼å‡ºé»˜è®¤è¿ç§»ã€‚  4ã€Passporté…ç½®"><meta itemprop="datePublished" content="2019-01-25T00:00:00+00:00" />
<meta itemprop="dateModified" content="2019-01-25T00:00:00+00:00" />
<meta itemprop="wordCount" content="431"><meta itemprop="image" content="https://qiniu.zkilm.cn/blog/cover/anime-girl.jpeg"/>
<meta itemprop="keywords" content="Laravel,Passport," /><meta property="og:title" content="Laravelçš„APIåˆå§‹æ­å»ºä¹‹PassportğŸ˜„" />
<meta property="og:description" content="ä»‹ç» åœ¨ Laravelä¸­ï¼Œå®ç°åŸºäºä¼ ç»Ÿè¡¨å•çš„ç™»é™†å’Œæˆæƒå·²ç»éå¸¸ç®€å•ï¼Œä½†æ˜¯å¦‚ä½•æ»¡è¶³ API åœºæ™¯ä¸‹çš„æˆæƒéœ€æ±‚å‘¢ï¼Ÿåœ¨ APIåœºæ™¯é‡Œé€šå¸¸é€šè¿‡ä»¤ç‰Œæ¥å®ç°ç”¨æˆ·æˆæƒï¼Œè€Œéç»´æŠ¤è¯·æ±‚ä¹‹é—´çš„ Session çŠ¶æ€ã€‚åœ¨ Laravel é¡¹ç›®ä¸­ä½¿ç”¨ Passport å¯ä»¥è½»è€Œæ˜“ä¸¾åœ°å®ç° API æˆæƒè®¤è¯ï¼ŒPassport å¯ä»¥åœ¨å‡ åˆ†é’Ÿä¹‹å†…ä¸ºä½ çš„åº”ç”¨ç¨‹åºæä¾›å®Œæ•´çš„ OAuth2 æœåŠ¡ç«¯å®ç°ã€‚Passport æ˜¯åŸºäºç”± Alex Bilbie ç»´æŠ¤çš„ League OAuth2 server å»ºç«‹çš„ã€‚â¤ğŸ·ğŸ˜˜
å®‰è£… 1ã€å®‰è£…ä¸€ä¸ªå…¨æ–° laravel é¡¹ç›®
composer create-project --prefer-dist laravel/laravel passport 2ã€å®‰è£… Laravel Passport åŒ…
 Laravel Passport å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…ä¸ºä½ çš„åº”ç”¨å®ç°ä¸€ä¸ªå®Œæ•´çš„ OAuth2æœåŠ¡å™¨  composer require laravel/passport 3ã€åˆ›å»ºå­˜å‚¨å®¢æˆ·ç«¯å’Œä»¤ç‰Œçš„æ•°æ®è¡¨
 Passport æœåŠ¡æä¾›å™¨ä½¿ç”¨æ¡†æ¶æ³¨å†Œè‡ªå·±çš„æ•°æ®åº“è¿ç§»ç›®å½•ï¼Œå› æ­¤åœ¨æ³¨å†Œæä¾›å™¨åï¼Œå°±åº”è¯¥è¿è¡Œ Passport çš„è¿ç§»å‘½ä»¤æ¥è‡ªåŠ¨åˆ›å»ºå­˜å‚¨å®¢æˆ·ç«¯å’Œä»¤ç‰Œçš„æ•°æ®è¡¨  php artisan migrate  å¦‚æœä½ ä¸æ‰“ç®—ä½¿ç”¨ Passport çš„é»˜è®¤è¿ç§»ï¼Œä½ åº”è¯¥åœ¨ AppServiceProvider çš„ register æ–¹æ³•ä¸­è°ƒç”¨ Passport::ignoreMigrations æ–¹æ³•ã€‚ ä½ å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤ php artisan vendor:publish --tag=passport-migrations å¯¼å‡ºé»˜è®¤è¿ç§»ã€‚  4ã€Passporté…ç½®" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.zkilm.cn/posts/2019/20190125-laravel-passport/" /><meta property="og:image" content="https://qiniu.zkilm.cn/blog/cover/anime-girl.jpeg"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-01-25T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-01-25T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://qiniu.zkilm.cn/blog/cover/anime-girl.jpeg"/>

<meta name="twitter:title" content="Laravelçš„APIåˆå§‹æ­å»ºä¹‹PassportğŸ˜„"/>
<meta name="twitter:description" content="ä»‹ç» åœ¨ Laravelä¸­ï¼Œå®ç°åŸºäºä¼ ç»Ÿè¡¨å•çš„ç™»é™†å’Œæˆæƒå·²ç»éå¸¸ç®€å•ï¼Œä½†æ˜¯å¦‚ä½•æ»¡è¶³ API åœºæ™¯ä¸‹çš„æˆæƒéœ€æ±‚å‘¢ï¼Ÿåœ¨ APIåœºæ™¯é‡Œé€šå¸¸é€šè¿‡ä»¤ç‰Œæ¥å®ç°ç”¨æˆ·æˆæƒï¼Œè€Œéç»´æŠ¤è¯·æ±‚ä¹‹é—´çš„ Session çŠ¶æ€ã€‚åœ¨ Laravel é¡¹ç›®ä¸­ä½¿ç”¨ Passport å¯ä»¥è½»è€Œæ˜“ä¸¾åœ°å®ç° API æˆæƒè®¤è¯ï¼ŒPassport å¯ä»¥åœ¨å‡ åˆ†é’Ÿä¹‹å†…ä¸ºä½ çš„åº”ç”¨ç¨‹åºæä¾›å®Œæ•´çš„ OAuth2 æœåŠ¡ç«¯å®ç°ã€‚Passport æ˜¯åŸºäºç”± Alex Bilbie ç»´æŠ¤çš„ League OAuth2 server å»ºç«‹çš„ã€‚â¤ğŸ·ğŸ˜˜
å®‰è£… 1ã€å®‰è£…ä¸€ä¸ªå…¨æ–° laravel é¡¹ç›®
composer create-project --prefer-dist laravel/laravel passport 2ã€å®‰è£… Laravel Passport åŒ…
 Laravel Passport å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…ä¸ºä½ çš„åº”ç”¨å®ç°ä¸€ä¸ªå®Œæ•´çš„ OAuth2æœåŠ¡å™¨  composer require laravel/passport 3ã€åˆ›å»ºå­˜å‚¨å®¢æˆ·ç«¯å’Œä»¤ç‰Œçš„æ•°æ®è¡¨
 Passport æœåŠ¡æä¾›å™¨ä½¿ç”¨æ¡†æ¶æ³¨å†Œè‡ªå·±çš„æ•°æ®åº“è¿ç§»ç›®å½•ï¼Œå› æ­¤åœ¨æ³¨å†Œæä¾›å™¨åï¼Œå°±åº”è¯¥è¿è¡Œ Passport çš„è¿ç§»å‘½ä»¤æ¥è‡ªåŠ¨åˆ›å»ºå­˜å‚¨å®¢æˆ·ç«¯å’Œä»¤ç‰Œçš„æ•°æ®è¡¨  php artisan migrate  å¦‚æœä½ ä¸æ‰“ç®—ä½¿ç”¨ Passport çš„é»˜è®¤è¿ç§»ï¼Œä½ åº”è¯¥åœ¨ AppServiceProvider çš„ register æ–¹æ³•ä¸­è°ƒç”¨ Passport::ignoreMigrations æ–¹æ³•ã€‚ ä½ å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤ php artisan vendor:publish --tag=passport-migrations å¯¼å‡ºé»˜è®¤è¿ç§»ã€‚  4ã€Passporté…ç½®"/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>Laravelçš„APIåˆå§‹æ­å»ºä¹‹PassportğŸ˜„</title>
	<link rel="stylesheet" href="https://blog.zkilm.cn/css/style.min.eac77496566fd7d5768fd650ddb0b2b181ca6a2d7c5fdd6fe6b8ba4bf47e566f.css" integrity="sha256-6sd0llZv19V2j9ZQ3bCysYHKai18X91v5ri6S/R+Vm8=" crossorigin="anonymous">
	
	<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://blog.zkilm.cn">Promise</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="https://blog.zkilm.cn/posts/">æ–‡ç« </a>
				<a href="https://blog.zkilm.cn/tags/">æ ‡ç­¾</a>
				<a href="https://blog.zkilm.cn/reading/">é˜…è¯»</a>
				<a href="https://blog.zkilm.cn/about/">å…³äº</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<button id="toc-btn" class="hdr-btn desktop-only-ib" title="Table of Contents"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3" y2="6"></line><line x1="3" y1="12" x2="3" y2="12"></line><line x1="3" y1="18" x2="3" y2="18"></line></svg></button><span class="hdr-social hide-in-mobile"><a href="https://github.com/zhukangs" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://blog.zkilm.cn/posts/">æ–‡ç« </a></li>
			<li><a href="https://blog.zkilm.cn/tags/">æ ‡ç­¾</a></li>
			<li><a href="https://blog.zkilm.cn/reading/">é˜…è¯»</a></li>
			<li><a href="https://blog.zkilm.cn/about/">å…³äº</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta">
					<span>Jan 25, 25016&nbsp;
					<span id="busuanzi_container_page_pv" style="display: none;font-size: 8px;">
						<i class="fa fa-eye"></i> <span id="busuanzi_value_page_pv"></span>
					</span>
				</div>
				<h1>Laravelçš„APIåˆå§‹æ­å»ºä¹‹PassportğŸ˜„</h1>
			</header>
			<div class="content">
				<h3 id="ä»‹ç»">ä»‹ç»<a href="#ä»‹ç»" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>åœ¨ <code>Laravel</code>ä¸­ï¼Œå®ç°åŸºäºä¼ ç»Ÿè¡¨å•çš„ç™»é™†å’Œæˆæƒå·²ç»éå¸¸ç®€å•ï¼Œä½†æ˜¯å¦‚ä½•æ»¡è¶³ <code>API</code> åœºæ™¯ä¸‹çš„æˆæƒéœ€æ±‚å‘¢ï¼Ÿåœ¨ <code>API</code>åœºæ™¯é‡Œé€šå¸¸é€šè¿‡ä»¤ç‰Œæ¥å®ç°ç”¨æˆ·æˆæƒï¼Œè€Œéç»´æŠ¤è¯·æ±‚ä¹‹é—´çš„ <code>Session</code> çŠ¶æ€ã€‚åœ¨ <code>Laravel</code> é¡¹ç›®ä¸­ä½¿ç”¨ <code>Passport</code> å¯ä»¥è½»è€Œæ˜“ä¸¾åœ°å®ç° <code>API</code> æˆæƒè®¤è¯ï¼Œ<code>Passport</code> å¯ä»¥åœ¨å‡ åˆ†é’Ÿä¹‹å†…ä¸ºä½ çš„åº”ç”¨ç¨‹åºæä¾›å®Œæ•´çš„ <code>OAuth2</code> æœåŠ¡ç«¯å®ç°ã€‚<code>Passport</code> æ˜¯åŸºäºç”± Alex Bilbie ç»´æŠ¤çš„ League OAuth2 server å»ºç«‹çš„ã€‚â¤ğŸ·ğŸ˜˜</p>
<h3 id="å®‰è£…">å®‰è£…<a href="#å®‰è£…" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>1ã€å®‰è£…ä¸€ä¸ªå…¨æ–° <code>laravel</code> é¡¹ç›®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">composer create-project --prefer-dist laravel/laravel passport
</span></span></code></pre></div><p>2ã€å®‰è£…  <code>Laravel Passport</code> åŒ…</p>
<ul>
<li><code>Laravel Passport</code> å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…ä¸ºä½ çš„åº”ç”¨å®ç°ä¸€ä¸ªå®Œæ•´çš„ <code>OAuth2</code>æœåŠ¡å™¨</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">composer require laravel/passport
</span></span></code></pre></div><p>3ã€åˆ›å»ºå­˜å‚¨å®¢æˆ·ç«¯å’Œä»¤ç‰Œçš„æ•°æ®è¡¨</p>
<ul>
<li><code>Passport</code> æœåŠ¡æä¾›å™¨ä½¿ç”¨æ¡†æ¶æ³¨å†Œè‡ªå·±çš„æ•°æ®åº“è¿ç§»ç›®å½•ï¼Œå› æ­¤åœ¨æ³¨å†Œæä¾›å™¨åï¼Œå°±åº”è¯¥è¿è¡Œ <code>Passport</code> çš„è¿ç§»å‘½ä»¤æ¥è‡ªåŠ¨åˆ›å»ºå­˜å‚¨å®¢æˆ·ç«¯å’Œä»¤ç‰Œçš„æ•°æ®è¡¨</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">php artisan migrate
</span></span></code></pre></div><ul>
<li>å¦‚æœä½ ä¸æ‰“ç®—ä½¿ç”¨ <code>Passport</code> çš„é»˜è®¤è¿ç§»ï¼Œä½ åº”è¯¥åœ¨ <code>AppServiceProvider</code> çš„ <code>register</code> æ–¹æ³•ä¸­è°ƒç”¨ <code>Passport::ignoreMigrations</code> æ–¹æ³•ã€‚ ä½ å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤ <code>php artisan vendor:publish --tag=passport-migrations</code> å¯¼å‡ºé»˜è®¤è¿ç§»ã€‚</li>
</ul>
<p>4ã€Passporté…ç½®</p>
<ul>
<li>è¿è¡Œ <code>passport:install</code> å‘½ä»¤æ¥åˆ›å»ºç”Ÿæˆå®‰å…¨è®¿é—®ä»¤ç‰Œæ—¶æ‰€éœ€çš„åŠ å¯†å¯†é’¥ï¼ŒåŒæ—¶ï¼Œè¿™æ¡å‘½ä»¤ä¹Ÿä¼šåˆ›å»ºç”¨äºç”Ÿæˆè®¿é—®ä»¤ç‰Œçš„ã€Œä¸ªäººè®¿é—®ã€å®¢æˆ·ç«¯å’Œã€Œå¯†ç æˆæƒã€å®¢æˆ·ç«¯ï¼š</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">php artisan passport:install
</span></span></code></pre></div><ul>
<li>ä¸Šé¢å‘½ä»¤æ‰§è¡Œåï¼Œè¯·å°† <code>Laravel\Passport\HasApiTokens Trait</code> æ·»åŠ åˆ° <code>App\User</code> æ¨¡å‹ä¸­ï¼Œè¿™ä¸ª <code>Trait</code> ä¼šç»™ä½ çš„æ¨¡å‹æä¾›ä¸€äº›è¾…åŠ©å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥å·²è®¤è¯ç”¨æˆ·çš„ä»¤ç‰Œå’Œä½¿ç”¨èŒƒå›´ï¼š</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">App</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Laravel\Passport\HasApiTokens</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Notifications\Notifiable</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Foundation\Auth\User</span> <span class="k">as</span> <span class="nx">Authenticatable</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">Authenticatable</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">use</span> <span class="nx">HasApiTokens</span><span class="p">,</span> <span class="nx">Notifiable</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><ul>
<li>æ¥ä¸‹æ¥ï¼Œåœ¨ <code>AuthServiceProvider</code> çš„ <code>boot</code> æ–¹æ³•ä¸­è°ƒç”¨ <code>Passport::routes</code> å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¼šæ³¨å†Œå‘å‡ºè®¿é—®ä»¤ç‰Œå¹¶æ’¤é”€è®¿é—®ä»¤ç‰Œã€å®¢æˆ·ç«¯å’Œä¸ªäººè®¿é—®ä»¤ç‰Œæ‰€å¿…éœ€çš„è·¯ç”±ï¼š</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">App\Providers</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Laravel\Passport\Passport</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Gate</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Foundation\Support\Providers\AuthServiceProvider</span> <span class="k">as</span> <span class="nx">ServiceProvider</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">AuthServiceProvider</span> <span class="k">extends</span> <span class="nx">ServiceProvider</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd">     * åº”ç”¨ç¨‹åºçš„ç­–ç•¥æ˜ å°„ã€‚
</span></span></span><span class="line"><span class="cl"><span class="sd">     *
</span></span></span><span class="line"><span class="cl"><span class="sd">     * @var array
</span></span></span><span class="line"><span class="cl"><span class="sd">     */</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$policies</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;App\Model&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;App\Policies\ModelPolicy&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd">     * æ³¨å†Œä»»ä½•è®¤è¯/æˆæƒæœåŠ¡ã€‚
</span></span></span><span class="line"><span class="cl"><span class="sd">     *
</span></span></span><span class="line"><span class="cl"><span class="sd">     * @return void
</span></span></span><span class="line"><span class="cl"><span class="sd">     */</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">boot</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">registerPolicies</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">Passport</span><span class="o">::</span><span class="na">routes</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><ul>
<li>æœ€åï¼Œå°†é…ç½®æ–‡ä»¶ <code>config/auth.php</code> ä¸­æˆæƒçœ‹å®ˆå™¨ <code>guards</code> çš„ <code>api</code> çš„ <code>driver</code> é€‰é¡¹æ”¹ä¸º <code>passport</code>ã€‚æ­¤è°ƒæ•´ä¼šè®©ä½ çš„åº”ç”¨ç¨‹åºåœ¨åœ¨éªŒè¯ä¼ å…¥çš„ <code>API</code> çš„è¯·æ±‚æ—¶ä½¿ç”¨ <code>Passport</code> çš„ <code>TokenGuard</code> æ¥å¤„ç†ï¼š</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="s1">&#39;guards&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;web&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;driver&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;session&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;provider&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;users&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;api&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;driver&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;passport&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;provider&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;users&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">],</span>
</span></span></code></pre></div><h3 id="æµ‹è¯•">æµ‹è¯•<a href="#æµ‹è¯•" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>1ã€æ·»åŠ  <code>API</code> è·¯ç”±</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Route</span><span class="o">::</span><span class="na">group</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;prefix&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;auth&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">],</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Route</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="s1">&#39;AuthController@login&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Route</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;signup&#39;</span><span class="p">,</span> <span class="s1">&#39;AuthController@signup&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">Route</span><span class="o">::</span><span class="na">group</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;middleware&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;auth:api&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;logout&#39;</span><span class="p">,</span> <span class="s1">&#39;AuthController@logout&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;AuthController@user&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>2ã€åˆ›å»º<code>AuthController</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">php artisan make:controller AuthController
</span></span></code></pre></div><p>ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Auth</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Carbon\Carbon</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">App\User</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Hash</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Validator</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">AuthController</span> <span class="k">extends</span> <span class="nx">Controller</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">//æ³¨å†Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span> <span class="k">function</span> <span class="nf">signup</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;required&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;max:255&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;required&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;max:255&#39;</span><span class="p">,</span> <span class="s1">&#39;unique:users&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;required&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;min:6&#39;</span><span class="p">,</span> <span class="s1">&#39;confirmed&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">email</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="nx">bcrypt</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">password</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Successfully created user!&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span> <span class="mi">201</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ç™»å½•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span> <span class="k">function</span> <span class="nf">login</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Validator</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">(),</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|string|email&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|string&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;remember_me&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;boolean&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$credentials</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">only</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">Auth</span><span class="o">::</span><span class="na">attempt</span><span class="p">(</span><span class="nv">$credentials</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span><span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Unauthorized&#39;</span><span class="p">],</span> <span class="mi">401</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$user</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/*$user=User::where(&#39;email&#39;,$request-&gt;email)-&gt;first();
</span></span></span><span class="line"><span class="cl"><span class="cm">    if($user == &#39;&#39;) return response()-&gt;json([&#39;message&#39; =&gt; &#39;é‚®ç®±å·ä¸å­˜åœ¨ï¼&#39;],402);
</span></span></span><span class="line"><span class="cl"><span class="cm">    if(! Hash::check($request-&gt;password,$user-&gt;password)) return response()-&gt;json([&#39;message&#39; =&gt; &#39;å¯†ç ä¸æ­£ç¡®ï¼&#39;],401);*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nv">$tokenResult</span> <span class="o">=</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">createToken</span><span class="p">(</span><span class="s1">&#39;Personal Access Token&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$token</span> <span class="o">=</span> <span class="nv">$tokenResult</span><span class="o">-&gt;</span><span class="na">token</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">remember_me</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$token</span><span class="o">-&gt;</span><span class="na">expires_at</span> <span class="o">=</span> <span class="nx">Carbon</span><span class="o">::</span><span class="na">now</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">addWeeks</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$token</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;access_token&#39;</span> <span class="o">=&gt;</span> <span class="nv">$tokenResult</span><span class="o">-&gt;</span><span class="na">accessToken</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;token_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Bearer&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;expires_at&#39;</span> <span class="o">=&gt;</span> <span class="nx">Carbon</span><span class="o">::</span><span class="na">parse</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="nv">$tokenResult</span><span class="o">-&gt;</span><span class="na">token</span><span class="o">-&gt;</span><span class="na">expires_at</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span><span class="o">-&gt;</span><span class="na">toDateTimeString</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//é€€å‡º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span> <span class="k">function</span> <span class="nf">logout</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">token</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">revoke</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Successfully logged out&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ç™»å½•ç”¨æˆ·ä¿¡æ¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span> <span class="k">function</span> <span class="nf">user</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span></code></pre></div><h3 id="postmanè°ƒç”¨">Postmanè°ƒç”¨<a href="#postmanè°ƒç”¨" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>1ã€æ³¨å†Œ</p>
<p><code>Headers</code> ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span> <span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">json</span>
</span></span></code></pre></div><p><img src="https://qiniu.zkilm.cn/blog/posts/2019/20190125-laravel-passport01.jpg" alt="æ³¨å†Œ"></p>
<p>2ã€ç™»å½•</p>
<p><code>Headers</code> ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span> <span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">json</span>
</span></span></code></pre></div><p><img src="https://qiniu.zkilm.cn/blog/posts/2019/20190125-laravel-passport02.jpg" alt="ç™»å½•"></p>
<p>3ã€é€€å‡º</p>
<p><img src="https://qiniu.zkilm.cn/blog/posts/2019/20190125-laravel-passport03.jpg" alt="é€€å‡º"></p>
<p>æ³¨æ„ï¼š<code>Bearer</code> å’Œ <code>token</code>ä¹‹é—´æœ‰ä¸ªç©ºæ ¼å“¦ï¼ï¼ï¼ï¼</p>
<p>4ã€ç”¨æˆ·ä¿¡æ¯</p>
<p><img src="https://qiniu.zkilm.cn/blog/posts/2019/20190125-laravel-passport04.jpg" alt="ç”¨æˆ·ä¿¡æ¯"></p>
<p>æ³¨æ„ï¼š<code>Bearer</code> å’Œ <code>token</code> ä¹‹é—´æœ‰ä¸ªç©ºæ ¼å“¦ï¼ï¼ï¼ï¼</p>
<p>å‚è€ƒï¼š<a href="https://laravel-china.org/docs/laravel/5.7/passport/2270">https://laravel-china.org/docs/laravel/5.7/passport/2270</a></p>

			</div>

<div class="related-posts thin">
	<h2>See Also</h2>
	<ul>
	
	<li><a href="/posts/2019/20190111-laravel-eloquent/">Laravelæ¨¡å‹å¸¸ç”¨å±æ€§</a></li>
	
	<li><a href="/posts/2018/20181228-laravel-swoole/">ä½¿ç”¨LaravelSğŸš€</a></li>
	
	<li><a href="/posts/2018/20180805-tencent-sms/">è…¾è®¯äº‘çŸ­ä¿¡çš„ç®€å•ä½¿ç”¨</a></li>
	
	<li><a href="/posts/2018/20180718-laravel-seeder/">Laravelä¹‹å‡æ•°æ®ï¼ˆSeederï¼‰</a></li>
	
	<li><a href="/posts/2018/20180703-laravel-exception/">Laravelä¹‹å¼‚å¸¸å¤„ç†ï¼ˆExceptionï¼‰</a></li>
	
	</ul>
</div>

			<hr class="post-end">
			<footer class="post-info">
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-feather"><path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line></svg>Promise</p>
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://blog.zkilm.cn/tags/laravel">Laravel</a></span><span class="tag"><a href="https://blog.zkilm.cn/tags/passport">Passport</a></span>
				</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>431 Words</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>25016-01-25 00:00 &#43;0000</p>
			</footer>
		</article>
		<aside id="toc" class="show-toc">
			<div class="toc-title">Table of Contents</div>
			<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#ä»‹ç»">ä»‹ç»</a></li>
        <li><a href="#å®‰è£…">å®‰è£…</a></li>
        <li><a href="#æµ‹è¯•">æµ‹è¯•</a></li>
        <li><a href="#postmanè°ƒç”¨">Postmanè°ƒç”¨</a></li>
      </ul>
    </li>
  </ul>
</nav>
		</aside>
		<div class="post-nav thin">
			<a class="next-post" href="https://blog.zkilm.cn/posts/2019/20190304-laravel-crontab/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>LaravelæœåŠ¡ä¹‹ä»»åŠ¡è°ƒåº¦â°</span>
			</a>
			<a class="prev-post" href="https://blog.zkilm.cn/posts/2019/20190111-laravel-eloquent/">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>Laravelæ¨¡å‹å¸¸ç”¨å±æ€§</span>
			</a>
		</div>
		<div id="comments" class="thin"><script src="https://utteranc.es/client.js"
		repo="zhukangs/zhukangs.github.io"
		issue-term="pathname"
		theme="photon-dark"
		crossorigin="anonymous"
		async>
</script></div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p class="credits theme-by text-muted">
				<span id="busuanzi_container_site_pv" style="display:none">
					<i class="fa fa-eye"></i> <span id="busuanzi_value_site_pv"></span>
				</span>&nbsp;
			<span id="busuanzi_container_site_uv" style="display:none">
					<i class="fa fa-desktop"></i> <span id="busuanzi_value_site_uv"></span>
				</span>
		</p>
		<p>&copy; 2022 <a href="https://blog.zkilm.cn">Promise</a> &#183; <a target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index">é„‚ICPå¤‡2020023160å·-1</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://blog.zkilm.cn/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>



	<script src="https://blog.zkilm.cn/js/bundle.min.8256b8724b9578bbdf6d6f04c894255bc760e78e8a2d60ec0a91ea993acd3b77.js" integrity="sha256-gla4ckuVeLvfbW8EyJQlW8dg546KLWDsCpHqmTrNO3c=" crossorigin="anonymous"></script>
	


	
	
	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
	<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
	
	<script>
		$(document).ready(function() {
			var int = setInterval(fixCount, 100);
			var busuanziSiteOffset =  0 
			function fixCount() {
				if ($("#busuanzi_container_site_pv").css("display") != "none") {
					clearInterval(int);
					$("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + busuanziSiteOffset);
				}
			}
		});
	</script>
	
</body>

</html>
