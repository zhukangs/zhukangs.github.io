<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Laravel on Promise</title>
    <link>http://hugo.zkilm.cn/tags/laravel/</link>
    <description>Recent content in Laravel on Promise</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-hans</language>
    <copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright>
    <lastBuildDate>Mon, 23 Aug 2021 00:00:00 +0000</lastBuildDate><atom:link href="http://hugo.zkilm.cn/tags/laravel/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Elasticsearch åœ¨ Laravel ä¸­çš„ä½¿ç”¨ğŸ‘</title>
      <link>http://hugo.zkilm.cn/posts/20210823-laravel-es/</link>
      <pubDate>Mon, 23 Aug 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hugo.zkilm.cn/posts/20210823-laravel-es/</guid>
      <description>æœ¬æ–‡ç›®æ ‡  å­¦ä¼šåœ¨ Laravel ä¸­å®‰è£… Elasticsearchã€‚ åˆ›å»ºç´¢å¼•ã€‚ ç®€å•æŸ¥è¯¢ã€‚  å®‰è£… composer åŒ… composer require elasticsearch/elasticsearch &amp;#39;~7.0&amp;#39; é…ç½® config/database.php # Elasticsearch Config Info &#39;elasticsearch&#39; =&amp;gt; [ // Elasticsearch æ”¯æŒå¤šå°æœåŠ¡å™¨è´Ÿè½½å‡è¡¡ï¼Œå› æ­¤è¿™é‡Œæ˜¯ä¸€ä¸ªæ•°ç»„ &#39;hosts&#39; =&amp;gt; explode(&#39;,&#39;, env(&#39;ES_HOSTS&#39;)), &#39;username&#39; =&amp;gt; env(&#39;ES_USERNAME&#39;), &#39;password&#39; =&amp;gt; env(&#39;ES_PASSWORD&#39;), ], åˆå§‹åŒ– Elasticsearch å¯¹è±¡ // æ³¨å†Œä¸€ä¸ªåä¸º es çš„å•ä¾‹ $this-&amp;gt;app-&amp;gt;singleton(&amp;#39;es&amp;#39;, function () { // ä»é…ç½®æ–‡ä»¶è¯»å– Elasticsearch æœåŠ¡å™¨åˆ—è¡¨  $builder = ESClientBuilder::create()-&amp;gt;setHosts(config(&amp;#39;database.elasticsearch.hosts&amp;#39;)) -&amp;gt;setBasicAuthentication(config(&amp;#39;database.elasticsearch.username&amp;#39;),config(&amp;#39;database.elasticsearch.password&amp;#39;)); // å¦‚æœæ˜¯å¼€å‘ç¯å¢ƒ  if (app()-&amp;gt;environment() === &amp;#39;local&amp;#39;) { // é…ç½®æ—¥å¿—ï¼ŒElasticsearch çš„è¯·æ±‚å’Œè¿”å›æ•°æ®å°†æ‰“å°åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿æˆ‘ä»¬è°ƒè¯•  $builder-&amp;gt;setLogger(app(&amp;#39;log&amp;#39;)-&amp;gt;driver()); } return $builder-&amp;gt;build(); }); åˆ›å»ºç´¢å¼• curl -XPUT -u name:pwd http://ip:9200/user_behavior?</description>
    </item>
    
    <item>
      <title>Homestead(ubuntu)&#43;Laravel ä½¿ç”¨ RabbitMQ</title>
      <link>http://hugo.zkilm.cn/posts/20210121-laravel-rabbitmq/</link>
      <pubDate>Thu, 21 Jan 2021 00:00:00 +0000</pubDate>
      
      <guid>http://hugo.zkilm.cn/posts/20210121-laravel-rabbitmq/</guid>
      <description>å®‰è£… erlang erlang æ˜¯ RabbitMQ çš„ä¾èµ–ã€‚é¦–å…ˆæ‰§è¡Œ
sudo apt-get update ç„¶åæ‰§è¡Œ
sudo apt-get install erlang å®‰è£…å®Œæ¯•åï¼Œè¾“å…¥ erl æŸ¥çœ‹ erlang ç‰ˆæœ¬ï¼Œå‡ºç°å¦‚ä¸‹æç¤ºåˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸï¼š
Erlang/OTP 20 [erts-9.2] [source] [64-bit] [smp:1:1] [ds:1:1:10] [async-threads:10] [kernel-poll:false] Eshell V9.2 (abort with ^G) 1&amp;gt; ç„¶åé€€å‡º erlang å‘½ä»¤è¡Œï¼šæŒ‰ä¸‹ ctrl+cï¼Œç„¶åè¾“å…¥ a å³å¯ã€‚
å®‰è£… RabbitMq sudo apt-get install rabbitmq-server å®‰è£…å®Œæ¯•åï¼ŒæŸ¥çœ‹ RabbitMQ çŠ¶æ€ï¼š
sudo rabbitmqctl status # é™„ï¼š # å¯åŠ¨RabbitMQï¼š service rabbitmq-server start # åœæ­¢RabbitMQï¼š service rabbitmq-server stop  # é‡å¯RabbitMQï¼š service rabbitmq-server restart  é…ç½® RabbitMQ æ‰§è¡Œå‘½ä»¤ï¼Œå¯åŠ¨ RabbitMQ æ’ä»¶</description>
    </item>
    
    <item>
      <title>Laravelçš„å¾®ä¿¡å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯æ¨é€ğŸ“¨</title>
      <link>http://hugo.zkilm.cn/posts/20191127-wechat-pushmsg/</link>
      <pubDate>Wed, 27 Nov 2019 00:00:00 +0000</pubDate>
      
      <guid>http://hugo.zkilm.cn/posts/20191127-wechat-pushmsg/</guid>
      <description>å®‰è£…ä¸€ä¸ªçº¯å‡€çš„laravelæ¡†æ¶ composer create-project --prefer-dist laravel/laravel blog &amp;#34;5.7.*&amp;#34; å®‰è£…å¾®ä¿¡æ‰©å±•åŒ…EasyWeChat å®‰è£…å¥½ç”¨çš„å¾®ä¿¡æ‰©å±•åŒ…EasyWeChatï¼Œè¿™é‡Œä½¿ç”¨ laravel-wechat
# Laravel &amp;lt; 5.8 composer require &amp;#34;overtrue/laravel-wechat:~4.0&amp;#34; ç®¡ç†å¤šå…¬ä¼—å· Laravel ä½¿ç”¨ EasyWechat ç®¡ç†å¤šå…¬ä¼—å·
 åˆ›å»ºæ•°æ®è¡¨  php artisan make:model Wechat -m $table-&amp;gt;increments(&amp;#39;id&amp;#39;); $table-&amp;gt;string(&amp;#39;aid&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_app_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡å…¬ä¼—å·è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;wechat_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_token&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_aes_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_mch_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡æ”¯ä»˜è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;pay_api_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_cert_path&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_key_path&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_app_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡å¼€æ”¾å¹³å°è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;op_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_token&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_aes_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;work_corp_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡ä¼ä¸šå·è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;work_agent_id&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;work_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;timestamps(); åœ¨ App\Handlers åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•° WechatConfigHandler.php æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š  &amp;lt;?php /** * Created by PhpStorm. * User: zhukang. * Date: 2019/11/9. * Time: 11:54.</description>
    </item>
    
    <item>
      <title>Laravelè§£å†³è·¨åŸŸè¯·æ±‚ğŸƒâ€</title>
      <link>http://hugo.zkilm.cn/posts/20190725-cross-request/</link>
      <pubDate>Thu, 25 Jul 2019 00:00:00 +0000</pubDate>
      
      <guid>http://hugo.zkilm.cn/posts/20190725-cross-request/</guid>
      <description>ä»Šå¤©å…¬å¸å‰ç«¯çªç„¶è¯´è¯·æ±‚è·¨åŸŸäº†ï¼Œé‚£ä¹ˆå°±è§£å†³ä¸‹å’¯ï¼
åˆ›å»ºä¸­é—´ä»¶ é¦–å…ˆåˆ›å»ºä¸€ä¸ªä¸­é—´ä»¶
php artisan make:middleware EnableCrossRequestMiddleware ç¼–å†™ä¸­é—´ä»¶ ç„¶ååœ¨ä¸­é—´ä»¶ EnableCrossRequestMiddleware.php ç¼–å†™
&amp;lt;?php namespace App\Http\Middleware; use Closure; class EnableCrossRequestMiddleware { /** * Handle an incoming request. * * @param \Illuminate\Http\Request $request * @param \Closure $next * @return mixed */ public function handle($request, Closure $next) { $response = $next($request); $response-&amp;gt;header(&amp;#39;Access-Control-Allow-Origin&amp;#39;, &amp;#39;*&amp;#39;); $response-&amp;gt;header(&amp;#39;Access-Control-Allow-Headers&amp;#39;, &amp;#39;Origin, Content-Type, Cookie, Accept&amp;#39;); $response-&amp;gt;header(&amp;#39;Access-Control-Allow-Methods&amp;#39;, &amp;#39;GET, POST, PATCH, PUT, OPTIONS&amp;#39;); $response-&amp;gt;header(&amp;#39;Access-Control-Allow-Credentials&amp;#39;, &amp;#39;true&amp;#39;); //essionå…±äº«çš„éœ€æ±‚æ‰ç”¨åˆ°  return $response; } } æ³¨å†Œä¸­é—´ä»¶ æ·»åŠ åˆ°å…¨å±€ä¸­é—´ä»¶ Kernel.</description>
    </item>
    
    <item>
      <title>å¾®ä¿¡çš„H5åˆ†äº«ï¼ˆåŸºäº Laravel-Wechatï¼‰ğŸ˜¶</title>
      <link>http://hugo.zkilm.cn/posts/20190610-wechat-h5/</link>
      <pubDate>Mon, 10 Jun 2019 00:00:00 +0000</pubDate>
      
      <guid>http://hugo.zkilm.cn/posts/20190610-wechat-h5/</guid>
      <description>ä¸€ã€ç¼˜ç”± ä»€ä¹ˆéƒ½ä¸åšçš„æƒ…å†µä¸‹ï¼Œåœ¨å¾®ä¿¡åˆ†äº«H5é¡µé¢çš„æ—¶å€™ï¼Œåˆ†äº«åæ˜¯è¿™æ ·çš„ï¼š
ä½†æ˜¯ï¼Œç°åœ¨éœ€æ±‚æ˜¯ï¼Œåˆ†äº«åä¸ºä¸‹é¢è¿™æ ·ï¼š
æ²¡åŠæ³•ï¼Œè‡ªå·±å¼€å‘çš„H5è¦æƒ³åœ¨å¾®ä¿¡ä¸­è¿›è¡Œä¼ æ’­ï¼Œä½¿ç”¨å¾®ä¿¡ JSSDK æ˜¯å¿…ä¸å¯å°‘çš„ç¯èŠ‚ã€‚è€Œ JSSDK è™½ç„¶åªæ˜¯ä¸ª js ï¼Œå¯æ˜¯åŠ å¯†å¿…é¡»å¾—åœ¨æœåŠ¡ç«¯è¿›è¡Œã€‚
äºŒã€åŸºæœ¬æµç¨‹ 1.è®¾ç½®JSæ¥å£å®‰å…¨åŸŸå
è¿›å…¥å¾®ä¿¡å…¬ä¼—å·å¹³å° â€”&amp;gt; å…¬ä¼—å·è®¾ç½® â€”&amp;gt; åŠŸèƒ½è®¾ç½® â€”&amp;gt; JSæ¥å£å®‰å…¨åŸŸåï¼ˆ`test.zks.design`ï¼‰ è®¾ç½®çš„æ—¶å€™ï¼Œå¾®ä¿¡æœ‰æ•™ä½ å¦‚ä½•å»è®¾ç½®ï¼Œå°†ä¸‹è½½çš„æ–‡ä»¶ï¼ˆMP_verify_acUZIwvhxMREbXNt.txtï¼‰æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•å°±å¯ä»¥äº†ã€‚ 2.é…ç½®ä¸€ä¸ªåŸºç¡€ url ç”¨äºè·å– jssdk çš„ config å†…å®¹
ä½¿ç”¨çš„ url æ˜¯ http://test.zks.design/jssdkconfig
3.H5 é™æ€é¡µé¢å­˜æ”¾åœ¨ public/h5/ æ–‡ä»¶å¤¹ä¸‹
å› æ­¤åœ¨è®¿é—® H5 çš„æ—¶å€™ï¼Œéœ€è¦è®¿é—®åŸŸå `http://test.zks.design/h5/xxxx/` å› ä¸º H5 ä¸»è¦æ˜¯åˆ†äº«ï¼Œè€Œä¸æ˜¯åŸŸåè®¿é—®ï¼Œå› æ­¤è¿™ä¸ªåŸŸåæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ H5 å‡ç›´æ¥å†™é™æ€é¡µé¢ï¼Œå¹¶ä¸ä½¿ç”¨ laravel çš„ blade æ¨¡æ¿å»å†™H5ã€‚ 4.é€šè¿‡ ajax è·å– config é…ç½®
åœ¨éœ€è¦è°ƒç”¨åˆ†äº«çš„é¡µé¢ä¸Šï¼Œè¿›è¡Œ config é…ç½®çš„æ—¶å€™ï¼Œé¦–å…ˆé€šè¿‡ ajax å°†åŸºæœ¬å‚æ•°ä¼ é€ç»™æœåŠ¡ç«¯urlï¼ˆ`http://test.zks.design/jssdkconfig`ï¼‰ã€‚ ä¸€äº›éœ€è¦çš„å‚æ•°å¯èƒ½å¦‚ä¸‹ï¼š å¯ä»¥å‚ç…§ EasyWechat çš„æ–‡æ¡£ https://www.easywechat.com/docs/4.1/basic-services/jssdk å…¶ä¸­å»ºè®® $app-&amp;gt;jssdk-&amp;gt;setUrl($url) è®¾ç½®å½“å‰URL ä¸€å®šæ˜¯è‡ªå·±å‰ç«¯çš„é¡µé¢çš„ urlã€‚ 5.å°†è·å–åˆ°çš„ config ç›´æ¥æ”¾åœ¨ js ä¸­</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨LaravelS</title>
      <link>http://hugo.zkilm.cn/posts/20181228-laravel-swoole/</link>
      <pubDate>Fri, 28 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>http://hugo.zkilm.cn/posts/20181228-laravel-swoole/</guid>
      <description>Laravels ä»‹ç»  LaravelSæ˜¯ä¸€ä¸ªèƒ¶æ°´é¡¹ç›®ï¼Œç”¨äºå¿«é€Ÿé›†æˆSwooleåˆ°Laravelæˆ–Lumenï¼Œç„¶åèµ‹äºˆå®ƒä»¬æ›´å¥½çš„æ€§èƒ½ã€æ›´å¤šå¯èƒ½æ€§ã€‚ åœ¨ä½¿ç”¨laravelsä¹‹å‰ï¼Œå¿…é¡»å…ˆè£…ä¸Šswooleçš„æ‰©å±•ã€‚
 swooleæ–‡æ¡£ï¼šhttps://wiki.swoole.com/wiki/index/prid-1
laravesæ–‡æ¡£ï¼šhttps://github.com/hhxsv5/laravel-s
ç¯å¢ƒï¼šåœ¨VMwareè™šæ‹Ÿæœºä¸­è‡ªå·±æ­çš„ç¯å¢ƒï¼ŒCentos7ï¼ŒPHP7.2.12ï¼ŒNginx1.14.2ï¼ŒMySQL 5.5.60ã€‚
å®‰è£… Swoole æ‰©å±• 1ã€ç›´æ¥ pecl install swoole ,ä¼šæŠ¥é”™ï¼Œå› ä¸ºè£…æœ‰phpè€ç‰ˆæœ¬çš„ä¾èµ–ï¼Œæ‰€ä»¥è¦è£…æ–°çš„
yum install -y php72w-mysqlnd php72w-fpm php70w-pecl-redis php72w-common php72w-pdo php72w php72w-gd php72w-gd php72w-cli php72w-mbstring php72w-devel å› ä¸ºæˆ‘æ˜¯PHP7.2ï¼Œå¦‚æœä½ æ˜¯PHP7.0,å°†ä¸Šé¢çš„php72æ›¿æ¢ä¸ºphp70å³å¯ã€‚
2ã€å¦‚æœæŠ¥é”™ï¼š
PHP Parse error: syntax error, unexpected //&amp;#39;new&amp;#39; (T_NEW) in /usr/share/pear/PEAR/Frontend.php on //line 91 è§£å†³æ–¹æ¡ˆï¼š
å®‰è£…PECL //phpç‰ˆæœ¬ &amp;gt; 7 wget http://pear.php.net/go-pear.phar php go-pear.phar //phpç‰ˆæœ¬ &amp;lt; 7 yum install php-pear 3ã€å®‰è£…swooleåŒ…
1.pecl install swoole 2.WARNING:channel &amp;#34;pecl.php.net&amp;#34; has updated its protocols,use &amp;#34;pecl channel-update pecl.</description>
    </item>
    
  </channel>
</rss>
