<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Laravel on Promise</title>
    <link>https://blog.zkilm.cn/tags/laravel/</link>
    <description>Recent content in Laravel on Promise</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-hans</language>
    <copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright>
    <lastBuildDate>Sat, 05 Mar 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.zkilm.cn/tags/laravel/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Laravel ä½¿ç”¨JWT API æˆæƒğŸš€</title>
      <link>https://blog.zkilm.cn/posts/2022/20220305-api-jwt/</link>
      <pubDate>Sat, 05 Mar 2022 00:00:00 +0000</pubDate>
      
      <guid>https://blog.zkilm.cn/posts/2022/20220305-api-jwt/</guid>
      <description>ä»€ä¹ˆæ˜¯JWT  Json web token (JWT), æ˜¯ä¸ºäº†åœ¨ç½‘ç»œåº”ç”¨ç¯å¢ƒé—´ä¼ é€’å£°æ˜è€Œæ‰§è¡Œçš„ä¸€ç§åŸºäºJSONçš„å¼€æ”¾æ ‡å‡†ï¼ˆ(RFC 7519).è¯¥tokenè¢«è®¾è®¡ä¸ºç´§å‡‘ä¸”å®‰å…¨çš„ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ†å¸ƒå¼ç«™ç‚¹çš„å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰åœºæ™¯ã€‚JWTçš„å£°æ˜ä¸€èˆ¬è¢«ç”¨æ¥åœ¨èº«ä»½æä¾›è€…å’ŒæœåŠ¡æä¾›è€…é—´ä¼ é€’è¢«è®¤è¯çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä»¥ä¾¿äºä»èµ„æºæœåŠ¡å™¨è·å–èµ„æºï¼Œä¹Ÿå¯ä»¥å¢åŠ ä¸€äº›é¢å¤–çš„å…¶å®ƒä¸šåŠ¡é€»è¾‘æ‰€å¿…é¡»çš„å£°æ˜ä¿¡æ¯ï¼Œè¯¥tokenä¹Ÿå¯ç›´æ¥è¢«ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯è¢«åŠ å¯†ã€‚ä½œè€…ï¼šDearmadmané“¾æ¥ï¼šhttps://www.jianshu.com/p/576dbf44b2aeæ¥æºï¼šç®€ä¹¦è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚
 å…³äºJWTè®²è§£ä¸åˆ†æï¼šhttps://learnku.com/articles/17883
å®‰è£… composer å®‰è£… lcobucci/jwt ï¼Œæˆ‘è¿™é‡Œé»˜è®¤å®‰è£…çš„æ˜¯æœ€æ–°ç‰ˆ 4.1 ã€‚
composer require lcobucci/jwt å°è£… åœ¨ app\Helpers ç›®å½•ä¸‹æ–°å»º Jwt.php æ–‡ä»¶ï¼Œå°è£… Jwt ç±»ã€‚
&amp;lt;?php /** * Created by PhpStorm. * User: zhukang * Date: 2019/8/22 * Time: 16:39 */ namespace App\Helpers; use Illuminate\Support\Facades\Redis; use Lcobucci\Clock\SystemClock; use Lcobucci\JWT\Configuration; use Lcobucci\JWT\Exception; use Lcobucci\JWT\Signer\Hmac\Sha256; use Lcobucci\JWT\Signer\Key\InMemory; use Lcobucci\JWT\Token\Plain; use Lcobucci\JWT\Validation\Constraint\IdentifiedBy; use Lcobucci\JWT\Validation\Constraint\IssuedBy; use Lcobucci\JWT\Validation\Constraint\PermittedFor; use Lcobucci\JWT\Validation\Constraint\SignedWith; use Lcobucci\JWT\Validation\Constraint\ValidAt; use Lcobucci\JWT\Validation\RequiredConstraintsViolated; trait Jwt { protected $issuedBy;//ç­¾å‘äºº  protected $permittedFor;//å—ä¼—  protected $identifiedBy;//jwtç¼–å·  protected $issuedAt;//ç­¾å‘æ—¶é—´  protected $expiresAt;//è¿‡æœŸæ—¶é—´  protected $jwt_secret; //ç§˜é’¥  public function __construct() { //è·å–jwté…ç½®ä¿¡æ¯  $jwt_configs = config(&amp;#39;jwt&amp;#39;); $this-&amp;gt;issuedBy = $jwt_configs[&amp;#39;issuedBy&amp;#39;]; $this-&amp;gt;permittedFor = $jwt_configs[&amp;#39;permittedFor&amp;#39;]; $this-&amp;gt;identifiedBy = $jwt_configs[&amp;#39;identifiedBy&amp;#39;]; $this-&amp;gt;issuedAt = $jwt_configs[&amp;#39;issuedAt&amp;#39;]; $this-&amp;gt;expiresAt = $this-&amp;gt;issuedAt-&amp;gt;modify($jwt_configs[&amp;#39;expiresAt&amp;#39;]); $this-&amp;gt;jwt_secret = $jwt_configs[&amp;#39;jwt_secret&amp;#39;]; } /** * @Description:ç”Ÿæˆjwté…ç½®å¯¹è±¡ * @return Configuration * @Author:zhukang * @Date:2022/4/7 16:05 */ public function createJwtObject() { return Configuration::forSymmetricSigner( new Sha256(), InMemory::base64Encoded($this-&amp;gt;jwt_secret) ); } /** * @Description:ç”Ÿæˆtoken * @param array $bind éœ€è¦åœ¨jwtè½½ä½“(payload)ä¸­åŠ å…¥çš„æ•°æ® [&amp;#39;userid&amp;#39;=&amp;gt;1,&amp;#39;xxxx&amp;#39;=&amp;gt;xxxx] * @return string \Lcobucci\JWT\Token * @Author:zhukang * @Date:2022/4/7 16:04 */ public function getToken(array $bind = []) { $jwt_object = $this-&amp;gt;createJwtObject(); $jwt_obj = $jwt_object-&amp;gt;builder() -&amp;gt;issuedBy($this-&amp;gt;issuedBy) -&amp;gt;permittedFor($this-&amp;gt;permittedFor) -&amp;gt;identifiedBy($this-&amp;gt;identifiedBy) -&amp;gt;issuedAt($this-&amp;gt;issuedAt) -&amp;gt;canOnlyBeUsedAfter($this-&amp;gt;issuedAt) -&amp;gt;expiresAt($this-&amp;gt;expiresAt); if (is_array($bind) &amp;amp;&amp;amp; !</description>
    </item>
    
    <item>
      <title>Laravel ä½¿ç”¨ Sanctum API æˆæƒ</title>
      <link>https://blog.zkilm.cn/posts/2022/20220218-api-sanctum/</link>
      <pubDate>Fri, 18 Feb 2022 00:00:00 +0000</pubDate>
      
      <guid>https://blog.zkilm.cn/posts/2022/20220218-api-sanctum/</guid>
      <description>ä»‹ç»  Laravel Sanctum ä¸º SPAï¼ˆå•é¡µåº”ç”¨ç¨‹åºï¼‰ã€ç§»åŠ¨åº”ç”¨ç¨‹åºå’ŒåŸºäºä»¤ç‰Œçš„ã€ç®€å•çš„ API æä¾›è½»é‡çº§èº«ä»½éªŒè¯ç³»ç»Ÿã€‚Sanctum å…è®¸åº”ç”¨ç¨‹åºçš„æ¯ä¸ªç”¨æˆ·ä¸ºä»–ä»¬çš„å¸æˆ·ç”Ÿæˆå¤šä¸ª API ä»¤ç‰Œã€‚è¿™äº›ä»¤ç‰Œå¯ä»¥è¢«æˆäºˆæŒ‡å®šå…è®¸ä»¤ç‰Œæ‰§è¡Œå“ªäº›æ“ä½œçš„èƒ½åŠ› / èŒƒå›´ã€‚
 ç›¸å…³æ–‡æ¡£ï¼šhttps://learnku.com/docs/laravel/9.x/sanctum/12272
å®‰è£…   å®‰è£… Laravel Sanctum
composer require laravel/sanctum   Artisan å‘½ä»¤å‘å¸ƒ Sanctum çš„é…ç½®å’Œè¿ç§»æ–‡ä»¶
php artisan vendor:publish --provider=&amp;#34;Laravel\Sanctum\SanctumServiceProvider&amp;#34;   Sanctum å°†åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¡¨æ¥å­˜å‚¨ API ä»¤ç‰Œ
php artisan migrate   å°† Sanctum çš„ä¸­é—´ä»¶æ·»åŠ åˆ°æ‚¨åº”ç”¨çš„ app/Http/Kernel.php æ–‡ä»¶ä¸­çš„ api ä¸­é—´ä»¶ç»„ä¸­
&amp;#39;api&amp;#39; =&amp;gt; [ \Laravel\Sanctum\Http\Middleware\EnsureFrontendRequestsAreStateful::class, &amp;#39;throttle:api&amp;#39;, \Illuminate\Routing\Middleware\SubstituteBindings::class, ],   é…ç½®   é‡å†™é»˜è®¤æ¨¡å‹
æ‰§è¡Œè¿ç§»å‘½ä»¤å¾—æ—¶å€™ä¼šç”Ÿæˆapp\Models\PersonalAccessToken.phpæ–‡ä»¶ï¼Œå°½ç®¡é€šå¸¸ä¸éœ€è¦ï¼Œä½†æ‚¨å¯ä»¥è‡ªç”±æ‰©å±• Sanctum å†…éƒ¨ä½¿ç”¨çš„ PersonalAccessToken æ¨¡å‹ã€‚ç”±äºç”Ÿæˆçš„è¡¨åå« personal_access_tokensï¼Œå¼€å‘ä¸­æˆ‘ä»¬ä¹ æƒ¯ç”¨æˆ·è¡¨åå« usersï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†è¡¨åä¿®æ”¹ä¸º user_tokens ã€‚</description>
    </item>
    
    <item>
      <title>Laravel å¼€å‘ API åˆå§‹æ­å»º</title>
      <link>https://blog.zkilm.cn/posts/2022/20220115-api-init/</link>
      <pubDate>Sat, 15 Jan 2022 00:00:00 +0000</pubDate>
      
      <guid>https://blog.zkilm.cn/posts/2022/20220115-api-init/</guid>
      <description>å‰è¨€ ä½¿ç”¨ Laravel å¼€å‘è¿‡ä¸å°‘é¡¹ç›®ï¼Œå¤§éƒ¨åˆ†è¿˜æ˜¯å‰åç«¯åˆ†ç¦»çš„ï¼Œæ‰€ä»¥ä»Šå¤©å°±æ€»ç»“å½’çº³ä¸‹åœ¨å¼€å‘APIé¡¹ç›®æ—¶ï¼ŒLaravel çš„å‰æœŸæ¡†æ¶æ­å»ºè¿‡ç¨‹ï¼
ç¯å¢ƒ  PHP 8.0.5 (cli) MySQL 8.0.25-0ubuntu0.20.04.1 (Ubuntu) Nginx nginx/1.18.0 (Ubuntu) IDE PhpStorm2020.2  æ­å»º   å®‰è£…
//é»˜è®¤å®‰è£…æœ€æ–°ç‰ˆæœ¬ composer create-project laravel/laravel newapi //æŒ‡å®šç‰ˆæœ¬ composer create-project --prefer-dist laravel/laravel newapi &amp;#34;6.0.*&amp;#34;   é…ç½®
  æ•°æ®åº“ï¼ˆé…ç½®æ ¹ç›®å½•ä¸‹ .env æ–‡ä»¶ï¼‰
DB_CONNECTION=mysql // hoståœ°å€ DB_HOST=127.0.0.1 // ç«¯å£å· DB_PORT=3306 // æ•°æ®åº“å DB_DATABASE=laravel9 // ç”¨æˆ·å DB_USERNAME=root // å¯†ç  DB_PASSWORD=   æ—¶åŒºï¼ˆé…ç½® config/app.php æ–‡ä»¶ï¼‰
&amp;#39;timezone&amp;#39; =&amp;gt; &amp;#39;PRC&amp;#39;, // å¤§é™†æ—¶é—´     å®‰è£…æ‰©å±•åŒ…</description>
    </item>
    
    <item>
      <title>Laravel è¡¨å•éªŒè¯å°è£…ğŸ’ª</title>
      <link>https://blog.zkilm.cn/posts/2021/20211119-laravel-formrequest/</link>
      <pubDate>Fri, 19 Nov 2021 00:00:00 +0000</pubDate>
      
      <guid>https://blog.zkilm.cn/posts/2021/20211119-laravel-formrequest/</guid>
      <description>æ–°å»ºã€Œè¡¨å•éªŒè¯åŸºç±»ã€  æ–°å»ºã€Œè¡¨å•éªŒè¯åŸºç±»ã€ app/Http/Requests/FormRequest.php  &amp;lt;?php namespace App\Http\Requests; use Illuminate\Foundation\Http\FormRequest as BaseFormRequest; class FormRequest extends BaseFormRequest { use SceneValidator; /** * Determine if the user is authorized to make this request. * * @return bool */ public function authorize() { return true; } } æ–°å»ºåœºæ™¯éªŒè¯ç±»  æ–°å»º app/Http/Requests/SceneValidator.php  &amp;lt;?php namespace App\Http\Requests; use Illuminate\Contracts\Validation\{Factory, Validator}; trait SceneValidator { protected $scene = null; protected $onlyRule = []; protected $autoValidate = true; /** * Validate.</description>
    </item>
    
    <item>
      <title>Elasticsearch åœ¨ Laravel ä¸­çš„ä½¿ç”¨ğŸ‘</title>
      <link>https://blog.zkilm.cn/posts/2021/20210823-laravel-es/</link>
      <pubDate>Mon, 23 Aug 2021 00:00:00 +0000</pubDate>
      
      <guid>https://blog.zkilm.cn/posts/2021/20210823-laravel-es/</guid>
      <description>æœ¬æ–‡ç›®æ ‡  å­¦ä¼šåœ¨ Laravel ä¸­å®‰è£… Elasticsearchã€‚ åˆ›å»ºç´¢å¼•ã€‚ ç®€å•æŸ¥è¯¢ã€‚  å®‰è£… composer åŒ… composer require elasticsearch/elasticsearch &amp;#39;~7.0&amp;#39; é…ç½® config/database.php # Elasticsearch Config Info &amp;#39;elasticsearch&amp;#39; =&amp;gt; [ // Elasticsearch æ”¯æŒå¤šå°æœåŠ¡å™¨è´Ÿè½½å‡è¡¡ï¼Œå› æ­¤è¿™é‡Œæ˜¯ä¸€ä¸ªæ•°ç»„  &amp;#39;hosts&amp;#39; =&amp;gt; explode(&amp;#39;,&amp;#39;, env(&amp;#39;ES_HOSTS&amp;#39;)), &amp;#39;username&amp;#39; =&amp;gt; env(&amp;#39;ES_USERNAME&amp;#39;), &amp;#39;password&amp;#39; =&amp;gt; env(&amp;#39;ES_PASSWORD&amp;#39;), ], åˆå§‹åŒ– Elasticsearch å¯¹è±¡ // æ³¨å†Œä¸€ä¸ªåä¸º es çš„å•ä¾‹ $this-&amp;gt;app-&amp;gt;singleton(&amp;#39;es&amp;#39;, function () { // ä»é…ç½®æ–‡ä»¶è¯»å– Elasticsearch æœåŠ¡å™¨åˆ—è¡¨  $builder = ESClientBuilder::create()-&amp;gt;setHosts(config(&amp;#39;database.elasticsearch.hosts&amp;#39;)) -&amp;gt;setBasicAuthentication(config(&amp;#39;database.elasticsearch.username&amp;#39;),config(&amp;#39;database.elasticsearch.password&amp;#39;)); // å¦‚æœæ˜¯å¼€å‘ç¯å¢ƒ  if (app()-&amp;gt;environment() === &amp;#39;local&amp;#39;) { // é…ç½®æ—¥å¿—ï¼ŒElasticsearch çš„è¯·æ±‚å’Œè¿”å›æ•°æ®å°†æ‰“å°åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿æˆ‘ä»¬è°ƒè¯•  $builder-&amp;gt;setLogger(app(&amp;#39;log&amp;#39;)-&amp;gt;driver()); } return $builder-&amp;gt;build(); }); åˆ›å»ºç´¢å¼• curl -XPUT -u name:pwd http://ip:9200/user_behavior?</description>
    </item>
    
    <item>
      <title>Homestead(ubuntu)&#43;Laravel ä½¿ç”¨ RabbitMQ</title>
      <link>https://blog.zkilm.cn/posts/2021/20210121-laravel-rabbitmq/</link>
      <pubDate>Thu, 21 Jan 2021 00:00:00 +0000</pubDate>
      
      <guid>https://blog.zkilm.cn/posts/2021/20210121-laravel-rabbitmq/</guid>
      <description>å®‰è£… erlang  erlang æ˜¯ RabbitMQ çš„ä¾èµ–ã€‚é¦–å…ˆæ‰§è¡Œ  sudo apt-get update  ç„¶åæ‰§è¡Œ  sudo apt-get install erlang  å®‰è£…å®Œæ¯•åï¼Œè¾“å…¥ erl æŸ¥çœ‹ erlang ç‰ˆæœ¬ï¼Œå‡ºç°å¦‚ä¸‹æç¤ºåˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸï¼š  Erlang/OTP 20 [erts-9.2] [source] [64-bit] [smp:1:1] [ds:1:1:10] [async-threads:10] [kernel-poll:false] Eshell V9.2 (abort with ^G) 1&amp;gt;  ç„¶åé€€å‡º erlang å‘½ä»¤è¡Œï¼šæŒ‰ä¸‹ ctrl+cï¼Œç„¶åè¾“å…¥ a å³å¯ã€‚  å®‰è£… RabbitMq sudo apt-get install rabbitmq-server  å®‰è£…å®Œæ¯•åï¼ŒæŸ¥çœ‹ RabbitMQ çŠ¶æ€ï¼š  sudo rabbitmqctl status # é™„ï¼š # å¯åŠ¨RabbitMQï¼š service rabbitmq-server start # åœæ­¢RabbitMQï¼š service rabbitmq-server stop  # é‡å¯RabbitMQï¼š service rabbitmq-server restart  é…ç½® RabbitMQ  æ‰§è¡Œå‘½ä»¤ï¼Œå¯åŠ¨ RabbitMQ æ’ä»¶  sudo rabbitmq-plugins enable rabbitmq_management  æ·»åŠ ç”¨æˆ· RabbitMQï¼Œæ ¼å¼ï¼šrabbitmqctl add_user ç”¨æˆ·å å¯†ç   rabbitmqctl add_user admin admin  ç»™äºˆç”¨æˆ·ç®¡ç†å‘˜æƒé™  sudo rabbitmqctl set_user_tags admin administrator  ä¸ºç”¨æˆ·è®¾ç½®è¯»å†™æƒé™  sudo rabbitmqctl set_permissions -p / admin &amp;#34;.</description>
    </item>
    
    <item>
      <title>å¤šå…¬ä¼—å·ç®¡ç†ğŸš¥â€</title>
      <link>https://blog.zkilm.cn/posts/2019/20191216-multiple-mp/</link>
      <pubDate>Mon, 16 Dec 2019 00:00:00 +0000</pubDate>
      
      <guid>https://blog.zkilm.cn/posts/2019/20191216-multiple-mp/</guid>
      <description>ä½¿ç”¨ EasyWechat æ‰©å±•åŒ…è¿›è¡Œå¤šå…¬ä¼—å·ç®¡ç†ï¼Œå…·ä½“æ­¥éª¤åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š
 æ–°å»ºå…¬ä¼—å·æ•°æ®è¡¨ åˆ›å»ºè¾…åŠ©å‡½æ•° åˆ›å»ºå¾®ä¿¡æ§åˆ¶å™¨ é…ç½®è·¯ç”± è®¾ç½®è·¯ç”±å¿½ç•¥ å¼€å§‹ä½¿ç”¨  å…¬ä¼—å·æ•°æ®è¡¨  åˆ›å»ºæ¨¡å‹  php artisan make:model Models/WechatMp -m //wechat_mps  åœ¨ç”Ÿæˆçš„ wechat_mps çš„ migration æ–‡ä»¶é‡Œå†™å…¥å¾®ä¿¡ç›¸å…³æ•°æ®å­—æ®µï¼š  public function up() { Schema::create(&amp;#39;wechats&amp;#39;, function (Blueprint $table) { $table-&amp;gt;increments(&amp;#39;id&amp;#39;); //å¾®ä¿¡å…¬ä¼—å·åŸºæœ¬å‚æ•°  $table-&amp;gt;string(&amp;#39;user_id&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;name&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;type&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;status&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;logo&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;is_use&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;is_connect&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_app_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡å…¬ä¼—å·è®¾ç½®å‚æ•°  $table-&amp;gt;string(&amp;#39;wechat_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_token&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_aes_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_mch_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡æ”¯ä»˜è®¾ç½®å‚æ•°  $table-&amp;gt;string(&amp;#39;pay_api_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_cert_path&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_key_path&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_app_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡å¼€æ”¾å¹³å°è®¾ç½®å‚æ•°  $table-&amp;gt;string(&amp;#39;op_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_token&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_aes_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;work_corp_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡ä¼ä¸šå·è®¾ç½®å‚æ•°  $table-&amp;gt;string(&amp;#39;work_agent_id&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;work_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;timestamps(); }); } åˆ›å»ºè¾…åŠ©å‡½æ•°  æ¥ä¸‹æ¥åœ¨ App\Handlers åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•° WechatConfigHandler.</description>
    </item>
    
    <item>
      <title>Laravelçš„å¾®ä¿¡å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯æ¨é€ğŸ“¨</title>
      <link>https://blog.zkilm.cn/posts/2019/20191127-wechat-pushmsg/</link>
      <pubDate>Wed, 27 Nov 2019 00:00:00 +0000</pubDate>
      
      <guid>https://blog.zkilm.cn/posts/2019/20191127-wechat-pushmsg/</guid>
      <description>å®‰è£…ä¸€ä¸ªçº¯å‡€çš„laravelæ¡†æ¶ composer create-project --prefer-dist laravel/laravel blog &amp;#34;5.7.*&amp;#34; å®‰è£…å¾®ä¿¡æ‰©å±•åŒ…EasyWeChat å®‰è£…å¥½ç”¨çš„å¾®ä¿¡æ‰©å±•åŒ…EasyWeChatï¼Œè¿™é‡Œä½¿ç”¨ laravel-wechat
# Laravel &amp;lt; 5.8 composer require &amp;#34;overtrue/laravel-wechat:~4.0&amp;#34; ç®¡ç†å¤šå…¬ä¼—å· Laravel ä½¿ç”¨ EasyWechat ç®¡ç†å¤šå…¬ä¼—å·
 åˆ›å»ºæ•°æ®è¡¨  php artisan make:model Wechat -m $table-&amp;gt;increments(&amp;#39;id&amp;#39;); $table-&amp;gt;string(&amp;#39;aid&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_app_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡å…¬ä¼—å·è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;wechat_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_token&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_aes_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_mch_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡æ”¯ä»˜è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;pay_api_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_cert_path&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_key_path&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_app_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡å¼€æ”¾å¹³å°è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;op_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_token&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_aes_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;work_corp_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡ä¼ä¸šå·è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;work_agent_id&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;work_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;timestamps(); åœ¨ App\Handlers åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•° WechatConfigHandler.php æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š  &amp;lt;?php /** * Created by PhpStorm. * User: zhukang. * Date: 2019/11/9. * Time: 11:54.</description>
    </item>
    
    <item>
      <title>Laravelè§£å†³è·¨åŸŸè¯·æ±‚ğŸƒâ€</title>
      <link>https://blog.zkilm.cn/posts/2019/20190725-cross-request/</link>
      <pubDate>Thu, 25 Jul 2019 00:00:00 +0000</pubDate>
      
      <guid>https://blog.zkilm.cn/posts/2019/20190725-cross-request/</guid>
      <description>ä»Šå¤©å…¬å¸å‰ç«¯çªç„¶è¯´è¯·æ±‚è·¨åŸŸäº†ï¼Œé‚£ä¹ˆå°±è§£å†³ä¸‹å’¯ï¼
åˆ›å»ºä¸­é—´ä»¶ é¦–å…ˆåˆ›å»ºä¸€ä¸ªä¸­é—´ä»¶
php artisan make:middleware EnableCrossRequestMiddleware ç¼–å†™ä¸­é—´ä»¶ ç„¶ååœ¨ä¸­é—´ä»¶ EnableCrossRequestMiddleware.php ç¼–å†™
&amp;lt;?php namespace App\Http\Middleware; use Closure; class EnableCrossRequestMiddleware { /** * Handle an incoming request. * * @param \Illuminate\Http\Request $request * @param \Closure $next * @return mixed */ public function handle($request, Closure $next) { $response = $next($request); $response-&amp;gt;header(&amp;#39;Access-Control-Allow-Origin&amp;#39;, &amp;#39;*&amp;#39;); $response-&amp;gt;header(&amp;#39;Access-Control-Allow-Headers&amp;#39;, &amp;#39;Origin, Content-Type, Cookie, Accept&amp;#39;); $response-&amp;gt;header(&amp;#39;Access-Control-Allow-Methods&amp;#39;, &amp;#39;GET, POST, PATCH, PUT, OPTIONS&amp;#39;); $response-&amp;gt;header(&amp;#39;Access-Control-Allow-Credentials&amp;#39;, &amp;#39;true&amp;#39;); //essionå…±äº«çš„éœ€æ±‚æ‰ç”¨åˆ°  return $response; } } æ³¨å†Œä¸­é—´ä»¶ æ·»åŠ åˆ°å…¨å±€ä¸­é—´ä»¶ Kernel.</description>
    </item>
    
    <item>
      <title>å¾®ä¿¡çš„H5åˆ†äº«ï¼ˆåŸºäº Laravel-Wechatï¼‰ğŸ˜¶</title>
      <link>https://blog.zkilm.cn/posts/2019/20190610-wechat-h5/</link>
      <pubDate>Mon, 10 Jun 2019 00:00:00 +0000</pubDate>
      
      <guid>https://blog.zkilm.cn/posts/2019/20190610-wechat-h5/</guid>
      <description>ä¸€ã€ç¼˜ç”± ä»€ä¹ˆéƒ½ä¸åšçš„æƒ…å†µä¸‹ï¼Œåœ¨å¾®ä¿¡åˆ†äº«H5é¡µé¢çš„æ—¶å€™ï¼Œåˆ†äº«åæ˜¯è¿™æ ·çš„ï¼š
ä½†æ˜¯ï¼Œç°åœ¨éœ€æ±‚æ˜¯ï¼Œåˆ†äº«åä¸ºä¸‹é¢è¿™æ ·ï¼š
æ²¡åŠæ³•ï¼Œè‡ªå·±å¼€å‘çš„H5è¦æƒ³åœ¨å¾®ä¿¡ä¸­è¿›è¡Œä¼ æ’­ï¼Œä½¿ç”¨å¾®ä¿¡ JSSDK æ˜¯å¿…ä¸å¯å°‘çš„ç¯èŠ‚ã€‚è€Œ JSSDK è™½ç„¶åªæ˜¯ä¸ª js ï¼Œå¯æ˜¯åŠ å¯†å¿…é¡»å¾—åœ¨æœåŠ¡ç«¯è¿›è¡Œã€‚
äºŒã€åŸºæœ¬æµç¨‹ 1.è®¾ç½®JSæ¥å£å®‰å…¨åŸŸå
è¿›å…¥å¾®ä¿¡å…¬ä¼—å·å¹³å° â€”&amp;gt; å…¬ä¼—å·è®¾ç½® â€”&amp;gt; åŠŸèƒ½è®¾ç½® â€”&amp;gt; JSæ¥å£å®‰å…¨åŸŸåï¼ˆ`test.zks.design`ï¼‰ è®¾ç½®çš„æ—¶å€™ï¼Œå¾®ä¿¡æœ‰æ•™ä½ å¦‚ä½•å»è®¾ç½®ï¼Œå°†ä¸‹è½½çš„æ–‡ä»¶ï¼ˆMP_verify_acUZIwvhxMREbXNt.txtï¼‰æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•å°±å¯ä»¥äº†ã€‚ 2.é…ç½®ä¸€ä¸ªåŸºç¡€ url ç”¨äºè·å– jssdk çš„ config å†…å®¹
ä½¿ç”¨çš„ url æ˜¯ http://test.zks.design/jssdkconfig
3.H5 é™æ€é¡µé¢å­˜æ”¾åœ¨ public/h5/ æ–‡ä»¶å¤¹ä¸‹
å› æ­¤åœ¨è®¿é—® H5 çš„æ—¶å€™ï¼Œéœ€è¦è®¿é—®åŸŸå `http://test.zks.design/h5/xxxx/` å› ä¸º H5 ä¸»è¦æ˜¯åˆ†äº«ï¼Œè€Œä¸æ˜¯åŸŸåè®¿é—®ï¼Œå› æ­¤è¿™ä¸ªåŸŸåæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ H5 å‡ç›´æ¥å†™é™æ€é¡µé¢ï¼Œå¹¶ä¸ä½¿ç”¨ laravel çš„ blade æ¨¡æ¿å»å†™H5ã€‚ 4.é€šè¿‡ ajax è·å– config é…ç½®
åœ¨éœ€è¦è°ƒç”¨åˆ†äº«çš„é¡µé¢ä¸Šï¼Œè¿›è¡Œ config é…ç½®çš„æ—¶å€™ï¼Œé¦–å…ˆé€šè¿‡ ajax å°†åŸºæœ¬å‚æ•°ä¼ é€ç»™æœåŠ¡ç«¯urlï¼ˆ`http://test.zks.design/jssdkconfig`ï¼‰ã€‚ ä¸€äº›éœ€è¦çš„å‚æ•°å¯èƒ½å¦‚ä¸‹ï¼š å¯ä»¥å‚ç…§ EasyWechat çš„æ–‡æ¡£ https://www.easywechat.com/docs/4.1/basic-services/jssdk å…¶ä¸­å»ºè®® $app-&amp;gt;jssdk-&amp;gt;setUrl($url) è®¾ç½®å½“å‰URL ä¸€å®šæ˜¯è‡ªå·±å‰ç«¯çš„é¡µé¢çš„ urlã€‚ 5.å°†è·å–åˆ°çš„ config ç›´æ¥æ”¾åœ¨ js ä¸­</description>
    </item>
    
  </channel>
</rss>
