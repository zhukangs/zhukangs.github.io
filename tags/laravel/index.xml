<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Laravel on Promise</title>
    <link>https://hugo.zkilm.cn/tags/laravel/</link>
    <description>Recent content in Laravel on Promise</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-hans</language>
    <copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright>
    <lastBuildDate>Fri, 19 Nov 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://hugo.zkilm.cn/tags/laravel/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Laravel è¡¨å•éªŒè¯å°è£…ğŸ’ª</title>
      <link>https://hugo.zkilm.cn/posts/2021/20211119-laravel-formrequest/</link>
      <pubDate>Fri, 19 Nov 2021 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.zkilm.cn/posts/2021/20211119-laravel-formrequest/</guid>
      <description>æ–°å»ºã€Œè¡¨å•éªŒè¯åŸºç±»ã€  æ–°å»ºã€Œè¡¨å•éªŒè¯åŸºç±»ã€ app/Http/Requests/FormRequest.php  &amp;lt;?php namespace App\Http\Requests; use Illuminate\Foundation\Http\FormRequest as BaseFormRequest; class FormRequest extends BaseFormRequest { use SceneValidator; /** * Determine if the user is authorized to make this request. * * @return bool */ public function authorize() { return true; } } æ–°å»ºåœºæ™¯éªŒè¯ç±»  æ–°å»º app/Http/Requests/SceneValidator.php  &amp;lt;?php namespace App\Http\Requests; use Illuminate\Contracts\Validation\{Factory, Validator}; trait SceneValidator { protected $scene = null; protected $onlyRule = []; protected $autoValidate = true; /** * Validate.</description>
    </item>
    
    <item>
      <title>Elasticsearch åœ¨ Laravel ä¸­çš„ä½¿ç”¨ğŸ‘</title>
      <link>https://hugo.zkilm.cn/posts/2021/20210823-laravel-es/</link>
      <pubDate>Mon, 23 Aug 2021 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.zkilm.cn/posts/2021/20210823-laravel-es/</guid>
      <description>æœ¬æ–‡ç›®æ ‡  å­¦ä¼šåœ¨ Laravel ä¸­å®‰è£… Elasticsearchã€‚ åˆ›å»ºç´¢å¼•ã€‚ ç®€å•æŸ¥è¯¢ã€‚  å®‰è£… composer åŒ… composer require elasticsearch/elasticsearch &amp;#39;~7.0&amp;#39; é…ç½® config/database.php # Elasticsearch Config Info &amp;#39;elasticsearch&amp;#39; =&amp;gt; [ // Elasticsearch æ”¯æŒå¤šå°æœåŠ¡å™¨è´Ÿè½½å‡è¡¡ï¼Œå› æ­¤è¿™é‡Œæ˜¯ä¸€ä¸ªæ•°ç»„  &amp;#39;hosts&amp;#39; =&amp;gt; explode(&amp;#39;,&amp;#39;, env(&amp;#39;ES_HOSTS&amp;#39;)), &amp;#39;username&amp;#39; =&amp;gt; env(&amp;#39;ES_USERNAME&amp;#39;), &amp;#39;password&amp;#39; =&amp;gt; env(&amp;#39;ES_PASSWORD&amp;#39;), ], åˆå§‹åŒ– Elasticsearch å¯¹è±¡ // æ³¨å†Œä¸€ä¸ªåä¸º es çš„å•ä¾‹ $this-&amp;gt;app-&amp;gt;singleton(&amp;#39;es&amp;#39;, function () { // ä»é…ç½®æ–‡ä»¶è¯»å– Elasticsearch æœåŠ¡å™¨åˆ—è¡¨  $builder = ESClientBuilder::create()-&amp;gt;setHosts(config(&amp;#39;database.elasticsearch.hosts&amp;#39;)) -&amp;gt;setBasicAuthentication(config(&amp;#39;database.elasticsearch.username&amp;#39;),config(&amp;#39;database.elasticsearch.password&amp;#39;)); // å¦‚æœæ˜¯å¼€å‘ç¯å¢ƒ  if (app()-&amp;gt;environment() === &amp;#39;local&amp;#39;) { // é…ç½®æ—¥å¿—ï¼ŒElasticsearch çš„è¯·æ±‚å’Œè¿”å›æ•°æ®å°†æ‰“å°åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿æˆ‘ä»¬è°ƒè¯•  $builder-&amp;gt;setLogger(app(&amp;#39;log&amp;#39;)-&amp;gt;driver()); } return $builder-&amp;gt;build(); }); åˆ›å»ºç´¢å¼• curl -XPUT -u name:pwd http://ip:9200/user_behavior?</description>
    </item>
    
    <item>
      <title>Homestead(ubuntu)&#43;Laravel ä½¿ç”¨ RabbitMQ</title>
      <link>https://hugo.zkilm.cn/posts/2021/20210121-laravel-rabbitmq/</link>
      <pubDate>Thu, 21 Jan 2021 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.zkilm.cn/posts/2021/20210121-laravel-rabbitmq/</guid>
      <description>å®‰è£… erlang  erlang æ˜¯ RabbitMQ çš„ä¾èµ–ã€‚é¦–å…ˆæ‰§è¡Œ  sudo apt-get update  ç„¶åæ‰§è¡Œ  sudo apt-get install erlang  å®‰è£…å®Œæ¯•åï¼Œè¾“å…¥ erl æŸ¥çœ‹ erlang ç‰ˆæœ¬ï¼Œå‡ºç°å¦‚ä¸‹æç¤ºåˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸï¼š  Erlang/OTP 20 [erts-9.2] [source] [64-bit] [smp:1:1] [ds:1:1:10] [async-threads:10] [kernel-poll:false] Eshell V9.2 (abort with ^G) 1&amp;gt;  ç„¶åé€€å‡º erlang å‘½ä»¤è¡Œï¼šæŒ‰ä¸‹ ctrl+cï¼Œç„¶åè¾“å…¥ a å³å¯ã€‚  å®‰è£… RabbitMq sudo apt-get install rabbitmq-server  å®‰è£…å®Œæ¯•åï¼ŒæŸ¥çœ‹ RabbitMQ çŠ¶æ€ï¼š  sudo rabbitmqctl status # é™„ï¼š # å¯åŠ¨RabbitMQï¼š service rabbitmq-server start # åœæ­¢RabbitMQï¼š service rabbitmq-server stop  # é‡å¯RabbitMQï¼š service rabbitmq-server restart  é…ç½® RabbitMQ  æ‰§è¡Œå‘½ä»¤ï¼Œå¯åŠ¨ RabbitMQ æ’ä»¶  sudo rabbitmq-plugins enable rabbitmq_management  æ·»åŠ ç”¨æˆ· RabbitMQï¼Œæ ¼å¼ï¼šrabbitmqctl add_user ç”¨æˆ·å å¯†ç   rabbitmqctl add_user admin admin  ç»™äºˆç”¨æˆ·ç®¡ç†å‘˜æƒé™  sudo rabbitmqctl set_user_tags admin administrator  ä¸ºç”¨æˆ·è®¾ç½®è¯»å†™æƒé™  sudo rabbitmqctl set_permissions -p / admin &amp;#34;.</description>
    </item>
    
    <item>
      <title>å¤šå…¬ä¼—å·ç®¡ç†ğŸš¥â€</title>
      <link>https://hugo.zkilm.cn/posts/2019/20191216-multiple-mp/</link>
      <pubDate>Mon, 16 Dec 2019 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.zkilm.cn/posts/2019/20191216-multiple-mp/</guid>
      <description>ä½¿ç”¨ EasyWechat æ‰©å±•åŒ…è¿›è¡Œå¤šå…¬ä¼—å·ç®¡ç†ï¼Œå…·ä½“æ­¥éª¤åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š
 æ–°å»ºå…¬ä¼—å·æ•°æ®è¡¨ åˆ›å»ºè¾…åŠ©å‡½æ•° åˆ›å»ºå¾®ä¿¡æ§åˆ¶å™¨ é…ç½®è·¯ç”± è®¾ç½®è·¯ç”±å¿½ç•¥ å¼€å§‹ä½¿ç”¨  å…¬ä¼—å·æ•°æ®è¡¨  åˆ›å»ºæ¨¡å‹  php artisan make:model Models/WechatMp -m //wechat_mps  åœ¨ç”Ÿæˆçš„ wechat_mps çš„ migration æ–‡ä»¶é‡Œå†™å…¥å¾®ä¿¡ç›¸å…³æ•°æ®å­—æ®µï¼š  public function up() { Schema::create(&amp;#39;wechats&amp;#39;, function (Blueprint $table) { $table-&amp;gt;increments(&amp;#39;id&amp;#39;); //å¾®ä¿¡å…¬ä¼—å·åŸºæœ¬å‚æ•°  $table-&amp;gt;string(&amp;#39;user_id&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;name&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;type&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;status&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;logo&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;is_use&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;is_connect&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_app_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡å…¬ä¼—å·è®¾ç½®å‚æ•°  $table-&amp;gt;string(&amp;#39;wechat_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_token&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_aes_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_mch_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡æ”¯ä»˜è®¾ç½®å‚æ•°  $table-&amp;gt;string(&amp;#39;pay_api_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_cert_path&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_key_path&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_app_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡å¼€æ”¾å¹³å°è®¾ç½®å‚æ•°  $table-&amp;gt;string(&amp;#39;op_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_token&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_aes_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;work_corp_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡ä¼ä¸šå·è®¾ç½®å‚æ•°  $table-&amp;gt;string(&amp;#39;work_agent_id&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;work_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;timestamps(); }); } åˆ›å»ºè¾…åŠ©å‡½æ•°  æ¥ä¸‹æ¥åœ¨ App\Handlers åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•° WechatConfigHandler.</description>
    </item>
    
    <item>
      <title>Laravelçš„å¾®ä¿¡å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯æ¨é€ğŸ“¨</title>
      <link>https://hugo.zkilm.cn/posts/2019/20191127-wechat-pushmsg/</link>
      <pubDate>Wed, 27 Nov 2019 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.zkilm.cn/posts/2019/20191127-wechat-pushmsg/</guid>
      <description>å®‰è£…ä¸€ä¸ªçº¯å‡€çš„laravelæ¡†æ¶ composer create-project --prefer-dist laravel/laravel blog &amp;#34;5.7.*&amp;#34; å®‰è£…å¾®ä¿¡æ‰©å±•åŒ…EasyWeChat å®‰è£…å¥½ç”¨çš„å¾®ä¿¡æ‰©å±•åŒ…EasyWeChatï¼Œè¿™é‡Œä½¿ç”¨ laravel-wechat
# Laravel &amp;lt; 5.8 composer require &amp;#34;overtrue/laravel-wechat:~4.0&amp;#34; ç®¡ç†å¤šå…¬ä¼—å· Laravel ä½¿ç”¨ EasyWechat ç®¡ç†å¤šå…¬ä¼—å·
 åˆ›å»ºæ•°æ®è¡¨  php artisan make:model Wechat -m $table-&amp;gt;increments(&amp;#39;id&amp;#39;); $table-&amp;gt;string(&amp;#39;aid&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_app_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡å…¬ä¼—å·è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;wechat_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_token&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_aes_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_mch_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡æ”¯ä»˜è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;pay_api_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_cert_path&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_key_path&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_app_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡å¼€æ”¾å¹³å°è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;op_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_token&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_aes_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;work_corp_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡ä¼ä¸šå·è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;work_agent_id&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;work_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;timestamps(); åœ¨ App\Handlers åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•° WechatConfigHandler.php æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š  &amp;lt;?php /** * Created by PhpStorm. * User: zhukang. * Date: 2019/11/9. * Time: 11:54.</description>
    </item>
    
    <item>
      <title>Laravelè§£å†³è·¨åŸŸè¯·æ±‚ğŸƒâ€</title>
      <link>https://hugo.zkilm.cn/posts/2019/20190725-cross-request/</link>
      <pubDate>Thu, 25 Jul 2019 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.zkilm.cn/posts/2019/20190725-cross-request/</guid>
      <description>ä»Šå¤©å…¬å¸å‰ç«¯çªç„¶è¯´è¯·æ±‚è·¨åŸŸäº†ï¼Œé‚£ä¹ˆå°±è§£å†³ä¸‹å’¯ï¼
åˆ›å»ºä¸­é—´ä»¶ é¦–å…ˆåˆ›å»ºä¸€ä¸ªä¸­é—´ä»¶
php artisan make:middleware EnableCrossRequestMiddleware ç¼–å†™ä¸­é—´ä»¶ ç„¶ååœ¨ä¸­é—´ä»¶ EnableCrossRequestMiddleware.php ç¼–å†™
&amp;lt;?php namespace App\Http\Middleware; use Closure; class EnableCrossRequestMiddleware { /** * Handle an incoming request. * * @param \Illuminate\Http\Request $request * @param \Closure $next * @return mixed */ public function handle($request, Closure $next) { $response = $next($request); $response-&amp;gt;header(&amp;#39;Access-Control-Allow-Origin&amp;#39;, &amp;#39;*&amp;#39;); $response-&amp;gt;header(&amp;#39;Access-Control-Allow-Headers&amp;#39;, &amp;#39;Origin, Content-Type, Cookie, Accept&amp;#39;); $response-&amp;gt;header(&amp;#39;Access-Control-Allow-Methods&amp;#39;, &amp;#39;GET, POST, PATCH, PUT, OPTIONS&amp;#39;); $response-&amp;gt;header(&amp;#39;Access-Control-Allow-Credentials&amp;#39;, &amp;#39;true&amp;#39;); //essionå…±äº«çš„éœ€æ±‚æ‰ç”¨åˆ°  return $response; } } æ³¨å†Œä¸­é—´ä»¶ æ·»åŠ åˆ°å…¨å±€ä¸­é—´ä»¶ Kernel.</description>
    </item>
    
    <item>
      <title>å¾®ä¿¡çš„H5åˆ†äº«ï¼ˆåŸºäº Laravel-Wechatï¼‰ğŸ˜¶</title>
      <link>https://hugo.zkilm.cn/posts/2019/20190610-wechat-h5/</link>
      <pubDate>Mon, 10 Jun 2019 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.zkilm.cn/posts/2019/20190610-wechat-h5/</guid>
      <description>ä¸€ã€ç¼˜ç”± ä»€ä¹ˆéƒ½ä¸åšçš„æƒ…å†µä¸‹ï¼Œåœ¨å¾®ä¿¡åˆ†äº«H5é¡µé¢çš„æ—¶å€™ï¼Œåˆ†äº«åæ˜¯è¿™æ ·çš„ï¼š
ä½†æ˜¯ï¼Œç°åœ¨éœ€æ±‚æ˜¯ï¼Œåˆ†äº«åä¸ºä¸‹é¢è¿™æ ·ï¼š
æ²¡åŠæ³•ï¼Œè‡ªå·±å¼€å‘çš„H5è¦æƒ³åœ¨å¾®ä¿¡ä¸­è¿›è¡Œä¼ æ’­ï¼Œä½¿ç”¨å¾®ä¿¡ JSSDK æ˜¯å¿…ä¸å¯å°‘çš„ç¯èŠ‚ã€‚è€Œ JSSDK è™½ç„¶åªæ˜¯ä¸ª js ï¼Œå¯æ˜¯åŠ å¯†å¿…é¡»å¾—åœ¨æœåŠ¡ç«¯è¿›è¡Œã€‚
äºŒã€åŸºæœ¬æµç¨‹ 1.è®¾ç½®JSæ¥å£å®‰å…¨åŸŸå
è¿›å…¥å¾®ä¿¡å…¬ä¼—å·å¹³å° â€”&amp;gt; å…¬ä¼—å·è®¾ç½® â€”&amp;gt; åŠŸèƒ½è®¾ç½® â€”&amp;gt; JSæ¥å£å®‰å…¨åŸŸåï¼ˆ`test.zks.design`ï¼‰ è®¾ç½®çš„æ—¶å€™ï¼Œå¾®ä¿¡æœ‰æ•™ä½ å¦‚ä½•å»è®¾ç½®ï¼Œå°†ä¸‹è½½çš„æ–‡ä»¶ï¼ˆMP_verify_acUZIwvhxMREbXNt.txtï¼‰æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•å°±å¯ä»¥äº†ã€‚ 2.é…ç½®ä¸€ä¸ªåŸºç¡€ url ç”¨äºè·å– jssdk çš„ config å†…å®¹
ä½¿ç”¨çš„ url æ˜¯ http://test.zks.design/jssdkconfig
3.H5 é™æ€é¡µé¢å­˜æ”¾åœ¨ public/h5/ æ–‡ä»¶å¤¹ä¸‹
å› æ­¤åœ¨è®¿é—® H5 çš„æ—¶å€™ï¼Œéœ€è¦è®¿é—®åŸŸå `http://test.zks.design/h5/xxxx/` å› ä¸º H5 ä¸»è¦æ˜¯åˆ†äº«ï¼Œè€Œä¸æ˜¯åŸŸåè®¿é—®ï¼Œå› æ­¤è¿™ä¸ªåŸŸåæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ H5 å‡ç›´æ¥å†™é™æ€é¡µé¢ï¼Œå¹¶ä¸ä½¿ç”¨ laravel çš„ blade æ¨¡æ¿å»å†™H5ã€‚ 4.é€šè¿‡ ajax è·å– config é…ç½®
åœ¨éœ€è¦è°ƒç”¨åˆ†äº«çš„é¡µé¢ä¸Šï¼Œè¿›è¡Œ config é…ç½®çš„æ—¶å€™ï¼Œé¦–å…ˆé€šè¿‡ ajax å°†åŸºæœ¬å‚æ•°ä¼ é€ç»™æœåŠ¡ç«¯urlï¼ˆ`http://test.zks.design/jssdkconfig`ï¼‰ã€‚ ä¸€äº›éœ€è¦çš„å‚æ•°å¯èƒ½å¦‚ä¸‹ï¼š å¯ä»¥å‚ç…§ EasyWechat çš„æ–‡æ¡£ https://www.easywechat.com/docs/4.1/basic-services/jssdk å…¶ä¸­å»ºè®® $app-&amp;gt;jssdk-&amp;gt;setUrl($url) è®¾ç½®å½“å‰URL ä¸€å®šæ˜¯è‡ªå·±å‰ç«¯çš„é¡µé¢çš„ urlã€‚ 5.å°†è·å–åˆ°çš„ config ç›´æ¥æ”¾åœ¨ js ä¸­</description>
    </item>
    
    <item>
      <title>Notificationä¹‹çº¢æ ‡è¯†æé†’ğŸš¨â€</title>
      <link>https://hugo.zkilm.cn/posts/2019/20190315-laravel-notify/</link>
      <pubDate>Fri, 15 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.zkilm.cn/posts/2019/20190315-laravel-notify/</guid>
      <description>å¯¼è¯­ Laravel è‡ªå¸¦äº†ä¸€å¥—æå…·æ‰©å±•æ€§çš„æ¶ˆæ¯é€šçŸ¥ç³»ç»Ÿï¼Œå°¤å…¶è¿˜æ”¯æŒå¤šç§é€šçŸ¥é¢‘é“(è¿™é‡Œæˆ‘ç”¨çš„æ˜¯æ•°æ®åº“é€šçŸ¥é¢‘é“)ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨æ­¤å¥—ç³»ç»Ÿæ¥å‘ç”¨æˆ·å‘é€æ¶ˆæ¯æé†’ã€‚
æœ€ç»ˆæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
{.figure}
{.figure}
å¼€å§‹ å‡†å¤‡åŸºæœ¬çš„åŠŸèƒ½å¼€å‘ ä¸€ä¸ªç”¨æˆ·ç»™å¦å¤–ä¸€ä¸ªç”¨æˆ·å‘é€æ¶ˆæ¯ï¼Œå°†ä¿¡æ¯å­˜å…¥æ•°æ®åº“è¡¨ï¼ˆnotify_testsè¡¨ï¼‰
   id msg send_id rev_id updated_at created_at     1 å•Šå“ˆå“ˆ	å“ˆ 1 2 2019-03-15 02:34:13 2019-03-15 02:34:13    å‡†å¤‡æ•°æ®  é€šçŸ¥æ•°æ®åº“,å­˜å‚¨æ‰€æœ‰é€šçŸ¥ä¿¡æ¯  1.php artisan notifications:table 2.php artisan migrate  è·Ÿè¸ªç”¨æˆ·æœ‰å¤šå°‘æœªè¯»é€šçŸ¥(ç»™userè¡¨åŠ å­—æ®µ)  1.php artisan make:migration add_notification_count_to_users_table --table=users 2.//database/migrations/{$timestamp}_add_notification_count_to_users_table.php public function up() { Schema::table(&amp;#39;users&amp;#39;, function (Blueprint $table) { $table-&amp;gt;integer(&amp;#39;notification_count&amp;#39;)-&amp;gt;unsigned()-&amp;gt;default(0); }); } public function down() { Schema::table(&amp;#39;users&amp;#39;, function (Blueprint $table) { $table-&amp;gt;dropColumn(&amp;#39;notification_count&amp;#39;); }); } 3.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨Elasticsearchåšå¼•æ“ï¼ŒScoutå…¨æ–‡æœç´¢ğŸ”</title>
      <link>https://hugo.zkilm.cn/posts/2019/20190308-laravel-elasticsearch/</link>
      <pubDate>Fri, 08 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.zkilm.cn/posts/2019/20190308-laravel-elasticsearch/</guid>
      <description>ElasticSearchæ˜¯ä¸€ä¸ªåŸºäºLuceneçš„æœç´¢æœåŠ¡å™¨ã€‚å®ƒæä¾›äº†ä¸€ä¸ªåˆ†å¸ƒå¼å¤šç”¨æˆ·èƒ½åŠ›çš„å…¨æ–‡æœç´¢å¼•æ“ï¼ŒåŸºäºRESTful webæ¥å£ã€‚Elasticsearchæ˜¯ç”¨Javaå¼€å‘çš„ï¼Œå¹¶ä½œä¸ºApacheè®¸å¯æ¡æ¬¾ä¸‹çš„å¼€æ”¾æºç å‘å¸ƒï¼Œæ˜¯å½“å‰æµè¡Œçš„ä¼ä¸šçº§æœç´¢å¼•æ“ã€‚è®¾è®¡ç”¨äºäº‘è®¡ç®—ä¸­ï¼Œèƒ½å¤Ÿè¾¾åˆ°å®æ—¶æœç´¢ï¼Œç¨³å®šï¼Œå¯é ï¼Œå¿«é€Ÿï¼Œå®‰è£…ä½¿ç”¨æ–¹ä¾¿
 å‡†å¤‡ 1ã€å®‰è£…æµ‹è¯•Laravel5.5ç”¨äºæµ‹è¯•
composer create-project --prefer-dist laravel/laravel test &amp;#34;5.5.*&amp;#34; 2ã€å®‰è£…è¿è¡Œes é“¾æ¥åœ°å€ï¼Œç‚¹å¼€é“¾æ¥ï¼Œæ ¹æ®è‡ªå·±çš„ç³»ç»Ÿä¸‹è½½å®‰è£…åŒ…ï¼Œé‡Œé¢å…³äºæ€ä¹ˆæ ·å®‰è£…è¿è¡Œéƒ½è¯´çš„æ¯”è¾ƒæ¸…æ¥šã€‚ä¸‹è½½åè§£å‹ã€‚ç”±äºæˆ‘ç”¨çš„æ˜¯Homesteadç¯å¢ƒï¼Œè‡ªå¸¦äº†esã€‚
cd elasticsearch-6.4.2 //è¿›å…¥åˆ°è§£å‹ç›®å½• ./bin/elasticsearch //æœ¬åœ°è¿è¡Œes  Homesteadç¯å¢ƒ  sudo systemctl restart elasticsearch.service //å¯åŠ¨ curl http://127.0.0.1:9200/ //æ£€æµ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ sudo /usr/share/elasticsearch/bin/elasticsearch-plugin list //æŸ¥çœ‹elasticsearch-analysis-ik ä¸­æ–‡åˆ†è¯æ’ä»¶ sudo systemctl disable elasticsearch.service //å…³é—­ Elasticsearch å¼€æœºå¯åŠ¨ å¼€å§‹ 1ã€è¿›å…¥é¡¹ç›®ç›®å½•
cd test 2ã€å®‰è£…Laravel scout å…¨æ–‡æœç´¢åŒ…
composer require laravel/scout=5.0 æ³¨æ„ï¼šå®‰è£…5.0ç‰ˆæœ¬éœ€è¦åšå¦‚ä¸‹ä¿®æ”¹ï¼š
 /vendor/laravel/scout/src/Searchable.php æœ‰ä¸€ä¸ªgetScoutModelsByIds()æ–¹æ³•çš„è¿™æ®µä»£ç æ³¨é‡Šæ‰å°±å¯ä»¥äº†ã€‚  if ($builder-&amp;gt;queryCallback) { call_user_func($builder-&amp;gt;queryCallback, $query); }   å°†laravel/scout 5.0.0ç‰ˆæœ¬æ¢æˆ laravel/scout 5.0.3å³å¯è§£å†³Undefined property: Laravel\Scout\Builder::$queryCallbackæŠ¥é”™é—®é¢˜ã€‚ä¸ç”¨æ‰‹åŠ¨ä¿®æ”¹æºç ã€‚</description>
    </item>
    
    <item>
      <title>LaravelæœåŠ¡ä¹‹ä»»åŠ¡è°ƒåº¦â°</title>
      <link>https://hugo.zkilm.cn/posts/2019/20190304-laravel-crontab/</link>
      <pubDate>Mon, 04 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.zkilm.cn/posts/2019/20190304-laravel-crontab/</guid>
      <description>åŸºç¡€ç¯‡
Laravel çš„å‘½ä»¤è°ƒåº¦ç¨‹åºå…è®¸ä½ åœ¨ Laravel ä¸­å¯¹å‘½ä»¤è°ƒåº¦è¿›è¡Œæ¸…æ™°æµç•…çš„å®šä¹‰ã€‚å¹¶ä¸”åœ¨ä½¿ç”¨è°ƒåº¦ç¨‹åºæ—¶ï¼Œåªéœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå¢åŠ ä¸€æ¡ Cron é¡¹ç›®å³å¯ã€‚è°ƒåº¦æ˜¯åœ¨ app/Console/Kernel.php æ–‡ä»¶çš„ schedule æ–¹æ³•ä¸­å®šä¹‰çš„ã€‚ä¸ºäº†æ–¹ä¾¿ä½ å¼€å§‹ï¼Œè¯¥æ–¹æ³•å·²ç»åŒ…å«äº†ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚
å®šä¹‰è°ƒåº¦ 1ã€åœ¨App\Console\Kernelç±»çš„scheduleæ–¹æ³•ä¸­å®šä¹‰æ‰€æœ‰è°ƒåº¦ä»»åŠ¡(Closure)ï¼š
protected function schedule(Schedule $schedule) { $schedule-&amp;gt;call(function () { $saying=str_random(10); Map::where(&amp;#39;id&amp;#39;,32)-&amp;gt;update([&amp;#39;value&amp;#39;=&amp;gt;$saying]); })-&amp;gt;hourly(); $schedule-&amp;gt;call(function () { .. })-&amp;gt;everyMinute(); . . . } 2ã€Artisanå‘½ä»¤è°ƒåº¦ï¼š
 é™¤äº†è®¡åˆ’ Closure è°ƒç”¨ï¼Œä½ è¿˜èƒ½è°ƒåº¦ Artisan å‘½ä»¤ å’Œæ“ä½œç³»ç»Ÿå‘½ä»¤ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥ç»™ command æ–¹æ³•ä¼ é€’å‘½ä»¤åç§°æˆ–è€…ç±»åç§°æ¥è°ƒåº¦ä¸€ä¸ª Artisan å‘½ä»¤ï¼š  $schedule-&amp;gt;command(&amp;#39;emails:send --force&amp;#39;)-&amp;gt;-&amp;gt;dailyAt(&amp;#39;13:00&amp;#39;); $schedule-&amp;gt;command(EmailsCommand::class, [&amp;#39;--force&amp;#39;])-&amp;gt;weekly(); 3ã€é˜Ÿåˆ—ä»»åŠ¡è°ƒåº¦ï¼š
 job æ–¹æ³•å¯ä»¥ç”¨æ¥è°ƒåº¦ é˜Ÿåˆ—ä»»åŠ¡ã€‚è¿™ä¸ªæ–¹æ³•æä¾›äº†ä¸€ç§å¿«æ·æ–¹å¼æ¥è°ƒåº¦ä»»åŠ¡ï¼Œæ— éœ€ä½¿ç”¨ call æ–¹æ³•æ‰‹åŠ¨åˆ›å»ºé—­åŒ…æ¥è°ƒåº¦ä»»åŠ¡  $schedule-&amp;gt;job(new Heartbeat)-&amp;gt;everyFiveMinutes(); 4ã€Shell å‘½ä»¤è°ƒåº¦ï¼š
 exec æ–¹æ³•å¯ç”¨äºå‘æ“ä½œç³»ç»Ÿå‘å‡ºå‘½ä»¤  $shell=&amp;#34;netstat -anp | grep 5200 | grep LISTEN | wc -l&amp;#34;; $shell=&amp;#34;node /home/forge/script.</description>
    </item>
    
  </channel>
</rss>
