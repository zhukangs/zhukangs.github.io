<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>MySQL on Promise</title>
    <link>https://blog.gookm.cn/tags/mysql/</link>
    <description>Recent content in MySQL on Promise</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-hans</language>
    <copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright>
    <lastBuildDate>Mon, 24 Aug 2020 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.gookm.cn/tags/mysql/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>MySQL è§„çº¦â€</title>
      <link>https://blog.gookm.cn/posts/2020/20200824-mysql-statute/</link>
      <pubDate>Mon, 24 Aug 2020 00:00:00 +0000</pubDate>
      
      <guid>https://blog.gookm.cn/posts/2020/20200824-mysql-statute/</guid>
      <description>ä¸€ã€å»ºè¡¨è§„çº¦ 1. ã€å¼ºåˆ¶ã€‘è¡¨è¾¾æ˜¯ä¸å¦æ¦‚å¿µçš„å­—æ®µï¼Œå¿…é¡»ä½¿ç”¨ is_xxx çš„æ–¹å¼å‘½åï¼Œæ•°æ®ç±»å‹æ˜¯ unsigned tinyintï¼ˆ 1 è¡¨ç¤ºæ˜¯ï¼Œ0 è¡¨ç¤ºå¦ï¼‰ï¼Œæ­¤è§„åˆ™åŒæ ·é€‚ç”¨äº odps å»ºè¡¨ã€‚ è¯´æ˜ï¼šä»»ä½•å­—æ®µå¦‚æœä¸ºéè´Ÿæ•°ï¼Œå¿…é¡»æ˜¯ unsignedã€‚ 2. ã€å¼ºåˆ¶ã€‘è¡¨åã€å­—æ®µåå¿…é¡»ä½¿ç”¨å°å†™å­—æ¯æˆ–æ•°å­—ï¼›ç¦æ­¢å‡ºç°æ•°å­—å¼€å¤´ï¼Œç¦æ­¢ä¸¤ä¸ªä¸‹åˆ’çº¿ä¸­é—´åªå‡ºç°æ•°å­—ã€‚æ•°æ®åº“å­—æ®µåçš„ä¿®æ”¹ä»£ä»·å¾ˆå¤§ï¼Œå› ä¸ºæ— æ³•è¿›è¡Œé¢„å‘å¸ƒï¼Œæ‰€ä»¥å­—æ®µåç§°éœ€è¦æ…é‡è€ƒè™‘ã€‚ æ­£ä¾‹ï¼šgetter_adminï¼Œtask_configï¼Œlevel3_name åä¾‹ï¼šGetterAdminï¼ŒtaskConfigï¼Œlevel_3_name 3. ã€å¼ºåˆ¶ã€‘è¡¨åä¸ä½¿ç”¨å¤æ•°åè¯ã€‚ è¯´æ˜ï¼šè¡¨ååº”è¯¥ä»…ä»…è¡¨ç¤ºè¡¨é‡Œé¢çš„å®ä½“å†…å®¹ï¼Œä¸åº”è¯¥è¡¨ç¤ºå®ä½“æ•°é‡ï¼Œå¯¹åº”äº DO ç±»åä¹Ÿæ˜¯å•æ•°å½¢å¼ï¼Œç¬¦åˆè¡¨è¾¾ä¹ æƒ¯ã€‚ 4. ã€å¼ºåˆ¶ã€‘ç¦ç”¨ä¿ç•™å­—ï¼Œå¦‚ descã€rangeã€matchã€delayed ç­‰ï¼Œè¯·å‚è€ƒ MySQL å®˜æ–¹ä¿ç•™å­—ã€‚ 5. ã€å¼ºåˆ¶ã€‘å”¯ä¸€ç´¢å¼•åä¸º ukå­—æ®µåï¼›æ™®é€šç´¢å¼•ååˆ™ä¸º idxå­—æ®µåã€‚ è¯´æ˜ï¼šuk_ å³ unique keyï¼›idx_ å³ index çš„ç®€ç§°ã€‚ 6. ã€å¼ºåˆ¶ã€‘å°æ•°ç±»å‹ä¸º decimalï¼Œç¦æ­¢ä½¿ç”¨ float å’Œ doubleã€‚ è¯´æ˜ï¼šfloat å’Œ double åœ¨å­˜å‚¨çš„æ—¶å€™ï¼Œå­˜åœ¨ç²¾åº¦æŸå¤±çš„é—®é¢˜ï¼Œå¾ˆå¯èƒ½åœ¨å€¼çš„æ¯”è¾ƒæ—¶ï¼Œå¾—åˆ°ä¸æ­£ç¡®çš„ç»“æœã€‚å¦‚æœå­˜å‚¨çš„æ•°æ®èŒƒå›´è¶…è¿‡ decimal çš„èŒƒå›´ï¼Œå»ºè®®å°†æ•°æ®æ‹†æˆæ•´æ•°å’Œå°æ•°åˆ†å¼€å­˜å‚¨ã€‚ 7. ã€å¼ºåˆ¶ã€‘å¦‚æœå­˜å‚¨çš„å­—ç¬¦ä¸²é•¿åº¦å‡ ä¹ç›¸ç­‰ï¼Œä½¿ç”¨ char å®šé•¿å­—ç¬¦ä¸²ç±»å‹ã€‚ 8. ã€å¼ºåˆ¶ã€‘varchar æ˜¯å¯å˜é•¿å­—ç¬¦ä¸²ï¼Œä¸é¢„å…ˆåˆ†é…å­˜å‚¨ç©ºé—´ï¼Œé•¿åº¦ä¸è¦è¶…è¿‡ 5000ï¼Œå¦‚æœå­˜å‚¨é•¿åº¦å¤§äºæ­¤å€¼ï¼Œå®šä¹‰å­—æ®µç±»å‹ä¸º textï¼Œç‹¬ç«‹å‡ºæ¥ä¸€å¼ è¡¨ï¼Œç”¨ä¸»é”®æ¥å¯¹åº”ï¼Œé¿å…å½±å“å…¶å®ƒå­—æ®µç´¢å¼•æ•ˆç‡ã€‚ 9. ã€å¼ºåˆ¶ã€‘è¡¨å¿…å¤‡ä¸‰å­—æ®µï¼šid, gmt_create, gmt_modifiedã€‚ è¯´æ˜ï¼šå…¶ä¸­ id å¿…ä¸ºä¸»é”®ï¼Œç±»å‹ä¸º unsigned bigintã€å•è¡¨æ—¶è‡ªå¢ã€æ­¥é•¿ä¸º 1ã€‚gmt_create,gmt_modified çš„ç±»å‹å‡ä¸º date_time ç±»å‹ã€‚ 10.</description>
    </item>
    
    <item>
      <title>æ€§èƒ½ä¼˜åŒ–ä¹‹MySQLä¼˜åŒ–ğŸš´â€</title>
      <link>https://blog.gookm.cn/posts/2019/20190309-mysql-opt/</link>
      <pubDate>Sat, 09 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>https://blog.gookm.cn/posts/2019/20190309-mysql-opt/</guid>
      <description>SQLè¯­å¥ä¼˜åŒ– æ…¢æŸ¥è¯¢ å¦‚ä½•å‘ç°æœ‰é—®é¢˜çš„SQLï¼Ÿä½¿ç”¨mysqlæ…¢æŸ¥è¯¢æ—¥å¿—å¯¹æœ‰æ•ˆç‡é—®é¢˜çš„SQLè¿›è¡Œç›‘æ§
//æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯å¦å¼€å¯ show variables like &amp;#39;slow_query_log&amp;#39;; //æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—å­˜å‚¨ä½ç½® show variables like &amp;#39;slow_query_log_file&amp;#39;; //å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿— set global slow_query_log=on; //æŒ‡å®šæ…¢æŸ¥è¯¢æ—¥å¿—å­˜å‚¨ä½ç½® set global show_query_log_file=&amp;#39;/var/lib/mysql/homestead-slow.log&amp;#39;; //è®°å½•æ²¡æœ‰ä½¿ç”¨ç´¢å¼•çš„sql set global log_queries_not_using_indexes=on; //è®°å½•æŸ¥è¯¢è¶…è¿‡1sçš„sql set global long_query_time=1; æ…¢æŸ¥è¯¢æ—¥å¿—æ‰€åŒ…å«çš„å†…å®¹ï¼š
#User@Host:root[root] @localhost[]//æ‰§è¡Œsqlçš„ä¸»æœºä¿¡æ¯ #Query_time:0.0000024 Lock_time:0.00 Rows_sent:0 Rows_esamined:0//sqlçš„æ‰§è¡Œä¿¡æ¯ SET timestamp=1402389324//sqlæ‰§è¡Œæ—¶é—´ select * from store; //sqlçš„å†…å®¹ MySQLæ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æå·¥å…·ä¹‹mysqldumpslowï¼ˆmysqlå®˜æ–¹ï¼‰
å®‰è£…å®ŒMySQLåï¼Œé»˜è®¤å°±å¸¦äº†mysqldumpslowï¼Œå¾ˆå¸¸ç”¨çš„ä¸€ä¸ªå·¥å…·ã€‚
//æŸ¥çœ‹å‚æ•°åˆ—è¡¨ mysqldumpslow -h //åˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—ä¸­å‰ä¸‰æ¡æ¯”è¾ƒæ…¢çš„sql mysqldumpslow -t 3 /var/lib/mysql/homestead-slow.log | more //è¾“å‡ºæ ·å¼æ•ˆæœ Count:1 Time:0.00s Lock=0.00s Rows=10.0 root[rppt]@localhost select * from store MySQLæ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æå·¥å…·ä¹‹pt-query-digest
åˆ†æç»“æœæ¯”mysqldumpslowæ›´è¯¦ç»†å…¨é¢
//è¾“å‡ºåˆ°æ–‡ä»¶ pt-query-digest slow-log &amp;gt; slow_log.</description>
    </item>
    
    <item>
      <title>mysqldumpå¯¼å‡ºæ•°æ®åº“å„å‚æ•°è¯´æ˜</title>
      <link>https://blog.gookm.cn/posts/2017/20170321-mysqldump/</link>
      <pubDate>Tue, 21 Mar 2017 00:00:00 +0000</pubDate>
      
      <guid>https://blog.gookm.cn/posts/2017/20170321-mysqldump/</guid>
      <description>mysqldumpæ˜¯mysqlç”¨äºè½¬å­˜å‚¨æ•°æ®åº“çš„å®ç”¨ç¨‹åºã€‚å®ƒä¸»è¦äº§ç”Ÿä¸€ä¸ªSQLè„šæœ¬ï¼Œå…¶ä¸­åŒ…å«ä»å¤´é‡æ–°åˆ›å»ºæ•°æ®åº“æ‰€å¿…éœ€çš„å‘½ä»¤CREATE TABLE INSERTç­‰ã€‚
ä¸‹é¢æˆ‘ä»¬è¯¦ç»†ä»‹ç»ä¸€ä¸‹mysqldumpå¯¼å‡ºçš„å„ç§å®ä¾‹ï¼š ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡
å¯¼å‡ºæ•°æ® 1 å¯¼å‡ºä¸€ä¸ªæ•°æ®åº“çš„ç»“æ„
mysqldump -d dbname -uroot -p &amp;gt; dbname.sql 2 å¯¼å‡ºå¤šä¸ªæ•°æ®åº“çš„ç»“æ„
mysqldump -d -B dbname1 dbname2 -uroot -p &amp;gt; dbname.sql 3 å¯¼å‡ºä¸€ä¸ªæ•°æ®åº“ä¸­æ•°æ®ï¼ˆä¸åŒ…å«ç»“æ„ï¼‰
mysqldump -t dbname -uroot -p &amp;gt; dbname.sql 4 å¯¼å‡ºå¤šä¸ªæ•°æ®åº“ä¸­æ•°æ®ï¼ˆä¸åŒ…å«ç»“æ„ï¼‰
mysqldump -t -B dbname1 dbname2 -uroot -p &amp;gt; dbname.sql 5 å¯¼å‡ºä¸€ä¸ªæ•°æ®åº“çš„ç»“æ„ä»¥åŠæ•°æ®
mysqldump dbname -uroot -p &amp;gt; dbname.sql 6 å¯¼å‡ºå¤šä¸ªæ•°æ®åº“çš„ç»“æ„ä»¥åŠæ•°æ®
mysqldump -B dbname1 dbname2 -uroot -p &amp;gt; dbname.sql 7 å¯¼å‡ºä¸€ä¸ªæ•°æ®åº“ä¸­ä¸€ä¸ªè¡¨çš„ç»“æ„
mysqldump -d dbname1 tablename -uroot -p &amp;gt; tablename.</description>
    </item>
    
    <item>
      <title>MySQLé«˜çº§æ“ä½œğŸ¥—</title>
      <link>https://blog.gookm.cn/posts/2017/20170106-mysql-advanced/</link>
      <pubDate>Fri, 06 Jan 2017 00:00:00 +0000</pubDate>
      
      <guid>https://blog.gookm.cn/posts/2017/20170106-mysql-advanced/</guid>
      <description>å¢åŠ å†…å®¹ï¼ˆåŸºç¡€å‘½ä»¤ï¼‰ 1.è¡¨åå¢åŠ ä¸»é”®alter table è¡¨å add primary key(å­—æ®µ); åœ¨æ‰€æœ‰å­—æ®µä¹‹åå¢åŠ primary keyé€‰é¡¹ï¼šprimary key(å­—æ®µä¿¡æ¯) ç›´æ¥åœ¨éœ€è¦å½“åšä¸»é”®çš„å­—æ®µä¹‹åï¼Œå¢åŠ primary keyå±æ€§æ¥ç¡®å®šä¸»é”® 2.åˆ é™¤ä¸»é”®alter table è¡¨å drop primary key; 3.è‡ªåŠ¨å¢é•¿åœ¨å­—æ®µä¹‹åå¢åŠ ä¸€ä¸ªå±æ€§auto_increment 4.ä¿®æ”¹è‡ªåŠ¨å¢é•¿ alter table è¡¨åauto_increment = å€¼; 5.åˆ é™¤è‡ªåŠ¨å¢é•¿ å¦‚ï¼šalter table è¡¨å modify id int 6.æŸ¥çœ‹è‡ªå¢é•¿åˆå§‹å˜é‡ show variables like &amp;#39;auto_increment%&amp;#39;; 7.æ·»åŠ å”¯ä¸€é”®ï¼ˆä¸ä¸»é”®åŸºæœ¬ä¸€æ ·ï¼‰alter table è¡¨åadd unique key(å­—æ®µåˆ—è¡¨); 8.åˆ é™¤å”¯ä¸€é”® alter table è¡¨ådrop unique key; - - é”™è¯¯çš„ å”¯ä¸€é”®å¯ä»¥æœ‰å¤šä¸ª alter table è¡¨ådrop index å”¯ä¸€é”®åå­—; é«˜çº§æ•°æ®æ“ä½œ 1.å¤šæ•°æ®æ’å…¥ insert into è¡¨å [(å­—æ®µåˆ—è¡¨)] values(å€¼åˆ—è¡¨), (å€¼åˆ—è¡¨)â€¦; 2.ä¸»é”®å†²çªæ›´æ–°insert into è¡¨å [(å­—æ®µåˆ—è¡¨)] values(å€¼åˆ—è¡¨) on duplicate key updateå­—æ®µ = æ–°å€¼; 3.</description>
    </item>
    
    <item>
      <title>MySQLåŸºç¡€æ“ä½œğŸ•</title>
      <link>https://blog.gookm.cn/posts/2016/20160511-mysql-basic/</link>
      <pubDate>Sun, 01 May 2016 00:00:00 +0000</pubDate>
      
      <guid>https://blog.gookm.cn/posts/2016/20160511-mysql-basic/</guid>
      <description>æ•°æ®åº“åŸºæœ¬æ“ä½œ 1.åˆ›å»ºæ•°æ®åº“ create database æ•°æ®åº“åå­— charset å­—ç¬¦é›†åç§°; 2.æ˜¾ç¤ºæ•°æ®åº“ show databases; show databases like â€˜åŒ¹é…æ¨¡å¼â€™; 3.æ˜¾ç¤ºæ•°æ®åº“åˆ›å»ºè¯­å¥ show create database æ•°æ®åº“åå­—; 4.é€‰æ‹©æ•°æ® use æ•°æ®åº“åå­—; 5.ä¿®æ”¹æ•°æ®åº“ alter database æ•°æ®åº“åå­— charset = å­—ç¬¦é›†;ï¼ˆç­‰å·å¯ä»¥çœï¼‰ 6.åˆ é™¤æ•°æ®åº“ drop database æ•°æ®åº“åå­—; æ•°æ®è¡¨æ“ä½œ 1.åˆ›å»ºæ•°æ®è¡¨ create table è¡¨å( å­—æ®µå1å­—æ®µç±»å‹ [å­—æ®µå±æ€§], -- å­—æ®µä¸å­—æ®µä¹‹é—´ä½¿ç”¨é€—å·åˆ†éš” â€¦ å­—æ®µåNå­—æ®µç±»å‹ [å­—æ®µå±æ€§] -- æœ€åä¸€ä¸ªå­—æ®µåé¢ä¸éœ€è¦é€—å·) [è¡¨é€‰é¡¹] 2.å¤åˆ¶å·²æœ‰è¡¨ç»“æ„ create table æ–°è¡¨å like è¡¨å; 3.æ˜¾ç¤ºæ•°æ®è¡¨ show tables; show tables like â€˜åŒ¹é…æ¨¡å¼â€™; 4.æ˜¾ç¤ºè¡¨ç»“æ„ describe è¡¨å desc è¡¨å(æ¨è) show columns from è¡¨å 5.</description>
    </item>
    
  </channel>
</rss>
