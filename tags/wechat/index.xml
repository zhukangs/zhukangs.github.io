<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Wechat on Promise</title>
    <link>https://hugo.zkilm.cn/tags/wechat/</link>
    <description>Recent content in Wechat on Promise</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-hans</language>
    <copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright>
    <lastBuildDate>Fri, 07 Feb 2020 00:00:00 +0000</lastBuildDate><atom:link href="https://hugo.zkilm.cn/tags/wechat/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>å¾®ä¿¡æ‰«ç  - å…³æ³¨å…¬ä¼—å·åç½‘ç«™è‡ªåŠ¨ç™»å½•</title>
      <link>https://hugo.zkilm.cn/posts/2020/20200207-wx-scan/</link>
      <pubDate>Fri, 07 Feb 2020 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.zkilm.cn/posts/2020/20200207-wx-scan/</guid>
      <description>å¤§æ¦‚æµç¨‹æ˜¯ï¼šç‚¹å‡»å¾®ä¿¡ç™»å½•ï¼Œç½‘ç«™è‡ªå·±å¼¹å‡ºä¸€ä¸ªäºŒç»´ç ã€æ‰«æäºŒç»´ç åå¼¹å‡ºå…¬ä¼—å·çš„å…³æ³¨ç•Œé¢ã€åªè¦ä¸€å…³æ³¨å…¬ä¼—å·ç½‘ç«™è‡ªåŠ¨ç™»å½•ã€ç¬¬äºŒæ¬¡æ‰«æç™»å½•çš„æ—¶å€™ç½‘ç«™ç›´æ¥ç™»å½•ã€‚è¿™ç§æ‰«ç ç™»å½•çš„æ–¹å¼ä¸ªäººè§‰å¾—éå¸¸åˆ©äºæ¨å¹¿å…¬ä¼—å·ã€‚
å¤§å®¶å¯ä»¥ä½“éªŒä¸€ä¸‹ ã€Œè¿™ç§ç™»å½•æ–¹å¼ã€
å‰æœŸå‡†å¤‡  æœåŠ¡å·ï¼ˆæˆ–è€…å¾®ä¿¡æµ‹è¯•è´¦å·ï¼‰ EasyWeChat æ‰©å±•åŒ…  ç†è§£ ç®€å•çš„è§£é‡Šä¸€ä¸‹æ‰«æè¿™ä¸ªå¸¦å‚äºŒç»´ç æœ‰ä»€ä¹ˆä¸åŒï¼š
 æ‰«æäºŒç»´ç ï¼Œå¦‚æœç”¨æˆ·è¿˜æœªå…³æ³¨å…¬ä¼—å·ï¼Œåˆ™ç”¨æˆ·å¯ä»¥å…³æ³¨å…¬ä¼—å·ï¼Œå…³æ³¨åå¾®ä¿¡ä¼šå°†å¸¦åœºæ™¯å€¼ï¼ˆè‡ªå®šä¹‰å€¼ï¼‰å…³æ³¨äº‹ä»¶æ¨é€ç»™å¼€å‘è€…ã€‚ æ‰«æäºŒç»´ç ï¼Œå¦‚æœç”¨æˆ·å·²ç»å…³æ³¨å…¬ä¼—å·ï¼Œåœ¨ç”¨æˆ·æ‰«æåä¼šè‡ªåŠ¨è¿›å…¥ä¼šè¯ï¼Œå¾®ä¿¡ä¹Ÿä¼šå°†å¸¦åœºæ™¯å€¼ï¼ˆè‡ªå®šä¹‰å€¼ï¼‰æ‰«ç äº‹ä»¶æ¨é€ç»™å¼€å‘è€…ã€‚  æ¢³ç† çœ‹åˆ°è¿™é‡Œç›¸ä¿¡ä½ å·²ç»æ˜ç™½äº†ï¼Œæ¢³ç†ä¸€ä¸‹ï¼š
 ç”ŸæˆäºŒç»´ç çš„æ—¶å€™ä½ è‡ªå®šä¹‰ä¸€ä¸ªå‚æ•°åˆ°äºŒç»´ç ä¸­ï¼Œé¡ºä¾¿æŠŠè¿™ä¸ªå‚æ•°ä¼ åˆ°å‰ç«¯é¡µé¢ä¸­ã€‚ å‰ç«¯é¡µé¢æ ¹æ®è¿™ä¸ªå‚æ•°è½®è¯¢ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼ˆä¹Ÿå¯ä½¿ç”¨ socketï¼‰ã€‚ ç”¨æˆ·æ‰«ç å…³æ³¨åä¼šæ¨é€ä¸€ä¸ªå…³æ³¨äº‹ä»¶åˆ°æœåŠ¡ç«¯ï¼Œä¹Ÿä¼šæŠŠè‡ªå®šä¹‰å‚æ•°å¸¦å…¥åˆ°äº‹ä»¶ä¸­ã€‚ æ ¹æ® openid åˆ›å»ºç”¨æˆ·åï¼Œç„¶ååœ¨ Redis ä¸­å­˜å‚¨ Key ä¸ºåœºæ™¯å€¼ï¼ˆè‡ªå®šä¹‰å‚æ•°ï¼‰ Value ä¸ºç”¨æˆ·åˆ›å»ºåçš„ idã€‚ å‰ç«¯è½®è¯¢æ–¹æ³•ä¸­å¦‚æœåœ¨ Redis ä¸­è·å–åˆ° Id åï¼ŒAuth ç™»é™†ï¼Œé¡µé¢å†é‡è½½ä¸€ä¸‹ï¼Œæµç¨‹å®Œæ¯•ã€‚  è¿˜æœ‰ä¸€ç§æ˜¯ç”¨äºæœ‰è´¦å·çš„ç”¨æˆ·ï¼Œå…ˆè´¦å·å¯†ç ç™»å½•ï¼Œå†æ‰«ç ï¼ˆä½¿ç”¨è¿‡ï¼‰ï¼š
 ç”Ÿæˆå¸¦loginå‚æ•°çš„ä¸´æ—¶äºŒç»´ç çš„æ—¶å€™ï¼Œå°†äºŒç»´ç çš„ticketæ›´æ–°åˆ°æ•°æ®åº“è¯¥ç”¨æˆ·ä¸‹ï¼Œé»˜è®¤çŠ¶æ€ä¸ºæœªä½¿ç”¨ ç”¨æˆ·æ‰«ç ï¼Œå¾®ä¿¡ä¼šæ¨é€ä¸€ä¸ªæ‰«ç äº‹ä»¶ï¼Œä¹Ÿä¼šæŠŠè‡ªå®šä¹‰å‚æ•°loginå¸¦åˆ°äº‹ä»¶ä¸­ï¼Œæ”¹å˜äºŒç»´ç çŠ¶æ€ä¸ºå·²ä½¿ç”¨ å‰ç«¯è¿›åˆ°æ‰«ç é¡µé¢çš„åŒæ—¶å°±å¼€å§‹è½®è¯¢æ‰«æç»“æœæ¥å£ï¼ŒçŠ¶æ€ä¸ºå·²ä½¿ç”¨åˆ™æ‰«ç ç™»å½•æˆåŠŸ æœªå…³æ³¨çš„ç”¨æˆ·ï¼Œä¼šå…ˆæ ¹æ®openidè·å–ç”¨æˆ·ä¿¡æ¯å¹¶å†™å…¥æ•°æ®åº“ï¼Œå…³æ³¨è¿‡çš„åˆ™æ•°æ®åº“æœ‰æ•°æ®ï¼Œåšç›¸å…³æ›´æ–°æ“ä½œã€‚  æœ€åé€ä¸ªè‡ªå·±ğŸ’ª
 å…¨ä¸–ç•Œå°±ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ä½ ï¼Œè¯·ä¸€å®šï¼šçœŸè¯šåšäººï¼ŒåŠªåŠ›åšäº‹ï¼ä½ æƒ³è¦çš„ï¼Œå²æœˆéƒ½ä¼šç»™ä½ ã€‚
 </description>
    </item>
    
    <item>
      <title>Laravelçš„å¾®ä¿¡å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯æ¨é€ğŸ“¨</title>
      <link>https://hugo.zkilm.cn/posts/2019/20191127-wechat-pushmsg/</link>
      <pubDate>Wed, 27 Nov 2019 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.zkilm.cn/posts/2019/20191127-wechat-pushmsg/</guid>
      <description>å®‰è£…ä¸€ä¸ªçº¯å‡€çš„laravelæ¡†æ¶ composer create-project --prefer-dist laravel/laravel blog &amp;#34;5.7.*&amp;#34; å®‰è£…å¾®ä¿¡æ‰©å±•åŒ…EasyWeChat å®‰è£…å¥½ç”¨çš„å¾®ä¿¡æ‰©å±•åŒ…EasyWeChatï¼Œè¿™é‡Œä½¿ç”¨ laravel-wechat
# Laravel &amp;lt; 5.8 composer require &amp;#34;overtrue/laravel-wechat:~4.0&amp;#34; ç®¡ç†å¤šå…¬ä¼—å· Laravel ä½¿ç”¨ EasyWechat ç®¡ç†å¤šå…¬ä¼—å·
 åˆ›å»ºæ•°æ®è¡¨  php artisan make:model Wechat -m $table-&amp;gt;increments(&amp;#39;id&amp;#39;); $table-&amp;gt;string(&amp;#39;aid&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_app_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡å…¬ä¼—å·è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;wechat_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_token&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;wechat_aes_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_mch_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡æ”¯ä»˜è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;pay_api_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_cert_path&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;pay_key_path&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_app_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡å¼€æ”¾å¹³å°è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;op_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_token&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;op_aes_key&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;work_corp_id&amp;#39;)-&amp;gt;nullable(); //å¾®ä¿¡ä¼ä¸šå·è®¾ç½®å‚æ•° $table-&amp;gt;string(&amp;#39;work_agent_id&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;string(&amp;#39;work_secret&amp;#39;)-&amp;gt;nullable(); $table-&amp;gt;timestamps(); åœ¨ App\Handlers åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•° WechatConfigHandler.php æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š  &amp;lt;?php /** * Created by PhpStorm. * User: zhukang. * Date: 2019/11/9. * Time: 11:54.</description>
    </item>
    
    <item>
      <title>å¾®ä¿¡çš„H5åˆ†äº«ï¼ˆåŸºäº Laravel-Wechatï¼‰ğŸ˜¶</title>
      <link>https://hugo.zkilm.cn/posts/2019/20190610-wechat-h5/</link>
      <pubDate>Mon, 10 Jun 2019 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.zkilm.cn/posts/2019/20190610-wechat-h5/</guid>
      <description>ä¸€ã€ç¼˜ç”± ä»€ä¹ˆéƒ½ä¸åšçš„æƒ…å†µä¸‹ï¼Œåœ¨å¾®ä¿¡åˆ†äº«H5é¡µé¢çš„æ—¶å€™ï¼Œåˆ†äº«åæ˜¯è¿™æ ·çš„ï¼š
ä½†æ˜¯ï¼Œç°åœ¨éœ€æ±‚æ˜¯ï¼Œåˆ†äº«åä¸ºä¸‹é¢è¿™æ ·ï¼š
æ²¡åŠæ³•ï¼Œè‡ªå·±å¼€å‘çš„H5è¦æƒ³åœ¨å¾®ä¿¡ä¸­è¿›è¡Œä¼ æ’­ï¼Œä½¿ç”¨å¾®ä¿¡ JSSDK æ˜¯å¿…ä¸å¯å°‘çš„ç¯èŠ‚ã€‚è€Œ JSSDK è™½ç„¶åªæ˜¯ä¸ª js ï¼Œå¯æ˜¯åŠ å¯†å¿…é¡»å¾—åœ¨æœåŠ¡ç«¯è¿›è¡Œã€‚
äºŒã€åŸºæœ¬æµç¨‹ 1.è®¾ç½®JSæ¥å£å®‰å…¨åŸŸå
è¿›å…¥å¾®ä¿¡å…¬ä¼—å·å¹³å° â€”&amp;gt; å…¬ä¼—å·è®¾ç½® â€”&amp;gt; åŠŸèƒ½è®¾ç½® â€”&amp;gt; JSæ¥å£å®‰å…¨åŸŸåï¼ˆ`test.zks.design`ï¼‰ è®¾ç½®çš„æ—¶å€™ï¼Œå¾®ä¿¡æœ‰æ•™ä½ å¦‚ä½•å»è®¾ç½®ï¼Œå°†ä¸‹è½½çš„æ–‡ä»¶ï¼ˆMP_verify_acUZIwvhxMREbXNt.txtï¼‰æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•å°±å¯ä»¥äº†ã€‚ 2.é…ç½®ä¸€ä¸ªåŸºç¡€ url ç”¨äºè·å– jssdk çš„ config å†…å®¹
ä½¿ç”¨çš„ url æ˜¯ http://test.zks.design/jssdkconfig
3.H5 é™æ€é¡µé¢å­˜æ”¾åœ¨ public/h5/ æ–‡ä»¶å¤¹ä¸‹
å› æ­¤åœ¨è®¿é—® H5 çš„æ—¶å€™ï¼Œéœ€è¦è®¿é—®åŸŸå `http://test.zks.design/h5/xxxx/` å› ä¸º H5 ä¸»è¦æ˜¯åˆ†äº«ï¼Œè€Œä¸æ˜¯åŸŸåè®¿é—®ï¼Œå› æ­¤è¿™ä¸ªåŸŸåæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ H5 å‡ç›´æ¥å†™é™æ€é¡µé¢ï¼Œå¹¶ä¸ä½¿ç”¨ laravel çš„ blade æ¨¡æ¿å»å†™H5ã€‚ 4.é€šè¿‡ ajax è·å– config é…ç½®
åœ¨éœ€è¦è°ƒç”¨åˆ†äº«çš„é¡µé¢ä¸Šï¼Œè¿›è¡Œ config é…ç½®çš„æ—¶å€™ï¼Œé¦–å…ˆé€šè¿‡ ajax å°†åŸºæœ¬å‚æ•°ä¼ é€ç»™æœåŠ¡ç«¯urlï¼ˆ`http://test.zks.design/jssdkconfig`ï¼‰ã€‚ ä¸€äº›éœ€è¦çš„å‚æ•°å¯èƒ½å¦‚ä¸‹ï¼š å¯ä»¥å‚ç…§ EasyWechat çš„æ–‡æ¡£ https://www.easywechat.com/docs/4.1/basic-services/jssdk å…¶ä¸­å»ºè®® $app-&amp;gt;jssdk-&amp;gt;setUrl($url) è®¾ç½®å½“å‰URL ä¸€å®šæ˜¯è‡ªå·±å‰ç«¯çš„é¡µé¢çš„ urlã€‚ 5.å°†è·å–åˆ°çš„ config ç›´æ¥æ”¾åœ¨ js ä¸­</description>
    </item>
    
  </channel>
</rss>
